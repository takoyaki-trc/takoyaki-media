<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>éœ²åº—ï¼ˆãŸã“ã´ã®ãŠåº—ï¼‰</title>

  <link rel="stylesheet" href="assets/roten.css">

  <style>
    /* âœ… toastãŒCSSã§æ½°ã•ã‚Œã¦ã‚‚å‹ã¤ä¿é™ºï¼ˆæœ€å¼·ï¼‰ */
    #toast{
      position:fixed !important;
      left:12px !important;
      right:12px !important;
      bottom: calc(14px + env(safe-area-inset-bottom)) !important;
      z-index: 2147483647 !important;
      pointer-events:none !important;

      opacity:0 !important;
      transform: translateY(10px) scale(.98) !important;
      transition: opacity .16s ease, transform .18s ease !important;

      padding: 14px 14px !important;
      border-radius: 14px !important;
      font-weight: 900 !important;
      letter-spacing: .02em !important;
      text-align:center !important;

      color:#fff !important;
      background: rgba(15,18,32,.92) !important;
      border:1px solid rgba(255,255,255,.16) !important;
      box-shadow: 0 18px 44px rgba(0,0,0,.55) !important;
      backdrop-filter: blur(6px) !important;
      -webkit-backdrop-filter: blur(6px) !important;
    }
    #toast.is-show{
      opacity:1 !important;
      transform: translateY(0) scale(1) !important;
    }

    /* âœ…ã€Œè³¼å…¥ã€ãŒç¸¦ã«ãªã‚‹å¯¾ç­– */
    .block-title{
      writing-mode: horizontal-tb !important;
      text-orientation: mixed !important;
      white-space: nowrap !important;
      line-height: 1.1 !important;
    }

    /* =====================================================
       âœ… å£²ã‚Šæ–¹ã‚’ãˆã‚‰ã¶ï¼š2æŠãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆæ¨ªä¸¦ã³ / ã‚¹ãƒãƒ›æœ€é©ï¼‰
    ===================================================== */
    .sellChoice{
      position: fixed;
      inset: 0;
      z-index: 2147483646;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 14px;
      background: rgba(0,0,0,.72);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
    }
    .sellChoice.is-open{ display:flex; }

    .sellChoice__panel{
      width: min(620px, 100%);
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(15,18,32,.88);
      box-shadow: 0 18px 44px rgba(0,0,0,.6);
      overflow: hidden;
    }

    /* âœ… å·¦ä¸Šã« â†æˆ»ã‚‹ */
    .sellChoice__head{
      padding: 12px 12px 10px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
    }
    .sellChoice__back{
      height: 36px;
      padding: 0 12px;
      border-radius: 12px;
      font-weight: 900;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.08);
      color:#fff;
      cursor:pointer;
      -webkit-tap-highlight-color: transparent;
      user-select:none;
    }
    .sellChoice__title{
      font-weight: 1000;
      letter-spacing: .04em;
      text-align:center;
      flex: 1;
    }
    .sellChoice__spacer{
      width: 88px; /* å·¦å³ãƒãƒ©ãƒ³ã‚¹ç”¨ï¼ˆæˆ»ã‚‹ãƒœã‚¿ãƒ³å¹…ç›¸å½“ï¼‰ */
      flex: 0 0 auto;
    }

    /* âœ… ç”»åƒã®ä¸Šã«èª¬æ˜æ–‡ */
    .sellChoice__desc{
      padding: 12px 14px 0;
      font-size: 13px;
      line-height: 1.45;
      opacity: .92;
    }
    .sellChoice__desc b{ font-weight: 1000; }

    /* âœ… æ¨ªä¸¦ã³ï¼ˆã‚¹ãƒãƒ›ã‚‚å¸¸ã«2åˆ—ã«å¯„ã›ã‚‹ï¼‰
       - 2åˆ—ãŒãã¤ã„ç«¯æœ«ã¯è‡ªå‹•ã§æŠ˜ã‚Šè¿”ã™
    */
    .sellChoice__body{
      padding: 12px 14px 14px;
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
    }
    @media (max-width: 360px){
      .sellChoice__body{
        grid-template-columns: 1fr; /* è¶…å°å‹ã ã‘ç¸¦ */
      }
    }

    .sellCard{
      display:block;
      border-radius: 16px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.15);
      text-decoration:none;
      color: inherit;
      cursor: pointer;
      -webkit-tap-highlight-color: transparent;
      user-select: none;
      transform: translateZ(0);
    }
    .sellCard:active{ transform: translateY(1px) scale(.99); }

    /* âœ… ç”»åƒã¯â€œé«˜ã•ã‚’æƒãˆã¦â€æ¨ªä¸¦ã³ã§ã‚‚æ°—æŒã¡ã„ã„ */
    .sellCard img{
      display:block;
      width: 100%;
      height: clamp(150px, 26vw, 220px);
      object-fit: cover;
    }

    .sellChoice__note{
      padding: 0 14px 14px;
      opacity: .82;
      font-size: 12px;
      line-height: 1.4;
    }
  </style>
</head>

<body>
  <header class="roten-header">
    <div class="roten-head-inner">
      <button class="btn btn-ghost roten-back" id="rotenBackBtn" type="button" aria-label="æˆ»ã‚‹">â†æˆ»ã‚‹</button>

      <div class="roten-head-center">
        <div class="roten-title">éœ²åº—</div>
        <div class="roten-sub">ãƒã‚¤éœ²åº— / ãŸã“ã´ã®ãŠåº—</div>
      </div>
    </div>
  </header>

  <main id="rotenApp" class="roten-app">

    <section class="hud">
      <div class="hud-left">
        <div class="hud-pill hud-pill--big">
          <span class="tag">ğŸª™</span>
          <span class="num" id="octoNow">0</span>
        </div>

        <div class="hud-pill">
          <span class="ico">ğŸŒ±</span><span class="lbl">ç¨®</span><b id="chipSeed">0</b>
          <span class="sep">/</span>
          <span class="ico">ğŸ’§</span><span class="lbl">æ°´</span><b id="chipWater">0</b>
          <span class="sep">/</span>
          <span class="ico">ğŸ§ª</span><span class="lbl">è‚¥æ–™</span><b id="chipFert">0</b>
        </div>
      </div>

      <div class="hud-right">
        <button class="btn btn-ghost" id="btnOpenInv" type="button">æ‰€æŒè³‡æ</button>
        <button class="btn btn-ghost" id="btnOpenRates" type="button">æ°´ã®ãƒ¬ã‚¢ç‡ãƒ¡ãƒ¢</button>

        <button class="btn btn-ghost" id="btnDebugPlus100000" type="button" aria-label="ãƒ‡ãƒãƒƒã‚°ï¼šã‚ªã‚¯ãƒˆã‚’100000å¢—ã‚„ã™">
          ğŸ§ª ã‚ªã‚¯ãƒˆï¼‹100000
        </button>

        <!-- âœ… 2æŠãƒ¢ãƒ¼ãƒ€ãƒ«èµ·å‹• -->
        <button class="btn btn-gold" id="btnOpenSell" type="button">
          ğŸª™ ã‚«ãƒ¼ãƒ‰å£²å´
        </button>
      </div>
    </section>

    <section class="shop-hero">
      <div class="hero-card">
        <div class="hero-imgwrap">
          <img class="hero-img" id="takopiHeroImg" src="https://ul.h3z.jp/0eBSeUBg.png" alt="ãŸã“ã´" />
        </div>

        <div class="hero-dialog">
          <div class="hero-name">ãŸã“ã´</div>
          <div class="hero-text" id="takopiSay">
            ã€Œã„ã‚‰ã£ã—ã‚ƒã„â€¦ãŸã“ã€‚<br>ã‚ªã‚¯ãƒˆã§â€œæœªæ¥â€ã‚’è²·ã†ã®ã€ã™ãâ€¦ãŸã“ï¼Ÿã€
          </div>

          <div class="hero-actions">
            <button class="btn" id="btnMikuji" type="button">ğŸ² ãŸã“ç„¼ãã¿ãã˜</button>
            <button class="btn" id="btnLaunchPresent" type="button">ğŸ å…¬é–‹è¨˜å¿µãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆ</button>
          </div>

          <div class="hero-note" id="heroNote">
            â€»ã‚³ãƒ©ãƒœã®ã‚¿ãƒã¯<b>ã‚·ãƒªã‚¢ãƒ«é™å®š</b>â€¦ãŸã“ã€‚
          </div>

          <div class="hero-serial" style="margin-top:10px;">
            <div style="font-weight:800; margin-bottom:6px;">ğŸ”‘ ã‚·ãƒªã‚¢ãƒ«å…¥åŠ›ï¼ˆã‚³ãƒ©ãƒœã®ã‚¿ãƒï¼‰</div>
            <div style="display:flex; gap:8px; align-items:center;">
              <input
                id="serialInlineInput"
                type="text"
                inputmode="text"
                autocomplete="off"
                placeholder="ä¾‹ï¼šTC-XXXX-XXXX"
                style="flex:1; min-width:0; padding:10px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.18); background:rgba(0,0,0,.25); color:#fff; outline:none;"
              />
              <button class="btn" id="serialInlineBtn" type="button" style="white-space:nowrap;">ä½¿ã†</button>
            </div>
            <div id="serialInlineMsg" style="margin-top:6px; font-size:12px; opacity:.85;" aria-live="polite"></div>
          </div>

        </div>
      </div>
    </section>

    <section class="block">
      <div class="block-head" style="display:flex; align-items:center; gap:10px;">
        <div class="block-title" style="flex:1;">è³¼å…¥</div>
        <div id="_aboutSlot" style="display:flex; justify-content:flex-end; align-items:center;"></div>
      </div>

      <div class="goods-tabs" aria-label="è³‡æã‚¿ãƒ–">
        <button class="goods-tab is-active" data-kind="seed" type="button">ã‚¿ãƒğŸŒ±</button>
        <button class="goods-tab" data-kind="water" type="button">ãƒŸã‚ºğŸ’§</button>
        <button class="goods-tab" data-kind="fert" type="button">ãƒ’ãƒªãƒ§ã‚¦ğŸ§ª</button>
      </div>

      <div class="goods-grid" id="goodsGrid"></div>
    </section>

  </main>

  <div id="toast" aria-live="polite"></div>

  <!-- ====== æ—¢å­˜MODALï¼ˆãã®ã¾ã¾ï¼‰ ====== -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="modal__backdrop" id="modalBg"></div>
    <div class="modal__sheet" role="dialog" aria-label="ãƒ¢ãƒ¼ãƒ€ãƒ«">
      <div class="modal__grab"></div>
      <div class="modal__head">
        <div class="modal__title" id="modalTitle">ã‚¿ã‚¤ãƒˆãƒ«</div>
        <button class="btn modal__x" id="modalX" type="button">é–‰ã˜ã‚‹</button>
      </div>
      <div id="modalBody" class="modal__body"></div>
    </div>
  </div>

  <!-- âœ… å£²ã‚Šæ–¹ã‚’ãˆã‚‰ã¶ï¼ˆ2æŠï¼‰ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div class="sellChoice" id="sellChoice" aria-hidden="true">
    <div class="sellChoice__panel" role="dialog" aria-label="å£²ã‚Šæ–¹ã‚’ãˆã‚‰ã¶">
      <div class="sellChoice__head">
        <!-- å·¦ä¸Šï¼šæˆ»ã‚‹ï¼ˆé–‰ã˜ã‚‹ï¼‰ -->
        <button class="sellChoice__back" id="sellChoiceBack" type="button" aria-label="æˆ»ã‚‹">â†æˆ»ã‚‹</button>

        <div class="sellChoice__title">å£²ã‚Šæ–¹ã‚’ãˆã‚‰ã¶</div>

        <!-- å³ã¯ç©ºã‘ã¦ä¸­å¤®ã‚¿ã‚¤ãƒˆãƒ«ã‚’ä¿ã¤ -->
        <div class="sellChoice__spacer" aria-hidden="true"></div>
      </div>

      <!-- âœ… ç”»åƒã®ä¸Šã«è»½ã„èª¬æ˜ -->
      <div class="sellChoice__desc">
        <b>ä»Šã™ãã‚ªã‚¯ãƒˆåŒ–</b>ã™ã‚‹ï¼Ÿ ãã‚Œã¨ã‚‚ <b>ãƒã‚¤éœ²åº—ã§ã‚³ãƒ„ã‚³ãƒ„è²©å£²</b>ã™ã‚‹ï¼Ÿ
      </div>

      <div class="sellChoice__body">
        <a class="sellCard" id="goInstantSell" href="sell.html" aria-label="ãŸã“ã´ã«å³å£²ã‚Šã¸">
          <img src="https://ul.h3z.jp/OY1i6zTs.png" alt="ãŸã“ã´ã«å³å£²ã‚Šï¼ˆæ›é‡‘ï¼‰">
        </a>

        <a class="sellCard" id="goMyShopSell" href="https://takoyaki-trc.github.io/takoyaki-media/town/myshop.html" aria-label="ãƒã‚¤éœ²åº—ã¸">
          <img src="https://ul.h3z.jp/03QxjNxa.png" alt="ãƒã‚¤éœ²åº—ã§å£²ã‚‹ï¼ˆãŸã“æ°‘ã«è²©å£²ï¼‰">
        </a>
      </div>

      <div class="sellChoice__note">
        â€»å³å£²ã‚Šï¼ã™ãæ›é‡‘ï¼ˆå®‰å®šï¼‰ / ãƒã‚¤éœ²åº—ï¼ãŸã“æ°‘ã«ã‚³ãƒ„ã‚³ãƒ„è²©å£²ï¼ˆä¸ŠæŒ¯ã‚Œç‹™ã„ï¼‰â€¦ãŸã“ã€‚
      </div>
    </div>
  </div>

  <script src="assets/roten.js"></script>

  <!-- âœ… ã“ã®ãƒšãƒ¼ã‚¸å°‚ç”¨ï¼šå£²å´ãƒœã‚¿ãƒ³ â†’ 2æŠãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆroten.jsã‚’è§¦ã‚‰ãšä¸Šæ›¸ãï¼‰ -->
  <script>
    (function(){
      const openBtn = document.getElementById("btnOpenSell");
      const modal   = document.getElementById("sellChoice");
      const backBtn = document.getElementById("sellChoiceBack");

      if(!openBtn || !modal) return;

      function open(){
        modal.classList.add("is-open");
        modal.setAttribute("aria-hidden","false");
        document.documentElement.style.overflow = "hidden";
        document.body.style.overflow = "hidden";
      }
      function close(){
        modal.classList.remove("is-open");
        modal.setAttribute("aria-hidden","true");
        document.documentElement.style.overflow = "";
        document.body.style.overflow = "";
      }

      // roten.jså´ã® click toast ã‚’æ®ºã—ã¦ã€ã“ã¡ã‚‰ã‚’å„ªå…ˆ
      openBtn.addEventListener("click", function(e){
        e.preventDefault();
        e.stopPropagation();
        if (e.stopImmediatePropagation) e.stopImmediatePropagation();
        open();
      }, true);

      backBtn && backBtn.addEventListener("click", close);

      // èƒŒæ™¯ã‚¿ãƒƒãƒ—ã§é–‰ã˜ã‚‹
      modal.addEventListener("click", (e)=>{ if(e.target === modal) close(); });

      // ESCã§é–‰ã˜ã‚‹
      document.addEventListener("keydown", (e)=>{ if(e.key === "Escape") close(); });
    })();
  </script>
</body>
</html>




