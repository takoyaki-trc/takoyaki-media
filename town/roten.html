<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>露店（たこぴのお店）</title>

  <link rel="stylesheet" href="assets/roten.css">
</head>

<body>
  <header class="roten-header">
    <div class="roten-head-inner">
      <div class="roten-title">露店</div>
      <div class="roten-sub">マイ露店 / たこぴのお店</div>
    </div>
  </header>

  <main id="rotenApp" class="roten-app">

    <!-- ====== HUD（スマホで崩れない） ====== -->
    <section class="hud">
      <div class="hud-left">
        <div class="hud-pill hud-pill--big">
          <span class="tag">《オクト》</span>
          <span class="num" id="octoNow">0</span>
        </div>

        <div class="hud-pill">
          <span class="ico">🌱</span><span class="lbl">種</span><b id="chipSeed">0</b>
          <span class="sep">/</span>
          <span class="ico">💧</span><span class="lbl">水</span><b id="chipWater">0</b>
          <span class="sep">/</span>
          <span class="ico">🧪</span><span class="lbl">肥料</span><b id="chipFert">0</b>
        </div>

        <div class="hud-pill">
          <span class="ico">📗</span><span class="lbl">図鑑所持</span><b id="chipBookOwned">0</b>
          <span class="sep">/</span>
          <span class="ico">♻️</span><span class="lbl">ダブり</span><b id="chipBookDup">0</b>
        </div>
      </div>

      <div class="hud-right">
        <button class="btn btn-ghost" id="btnOpenInv" type="button">所持資材</button>
        <button class="btn btn-ghost" id="btnOpenRates" type="button">水のレア率メモ</button>

        <!-- ★ デバッグ用：オクト+1000 -->
        <button class="btn btn-ghost" id="btnDebugPlus1000" type="button" aria-label="デバッグ：オクトを1000増やす">
          🧪 オクト＋1000
        </button>

        <!-- ★ 売却ページ：新規タブ -->
        <a class="btn btn-gold" id="btnOpenSell" href="sell.html" target="_blank" rel="noopener">
          🪙 カード売却
        </a>
      </div>
    </section>

    <!-- ====== タブ ====== -->
    <section class="tabs" role="tablist" aria-label="露店タブ">
      <a class="tab" href="https://takoyaki-trc.github.io/takoyaki-media/town/myshop.html" role="tab" aria-selected="false">
        マイ露店へ
      </a>
      <button class="tab is-active" type="button" role="tab" aria-selected="true">
        たこぴのお店
      </button>
    </section>

    <!-- ====== たこぴ店主ドーン（そのまま） ====== -->
    <section class="shop-hero">
      <div class="hero-card">
        <div class="hero-imgwrap">
          <img
            class="hero-img"
            id="takopiHeroImg"
            src="https://ul.h3z.jp/0eBSeUBg.png"
            alt="たこぴ"
          />
        </div>

        <div class="hero-dialog">
          <div class="hero-name">たこぴ</div>
          <div class="hero-text" id="takopiSay">
            「いらっしゃい…たこ。<br>オクトで“未来”を買うの、すき…たこ？」
          </div>

          <div class="hero-actions">
            <button class="btn" id="btnMikuji" type="button">🎲 たこ焼きみくじ</button>
            <button class="btn" id="btnLaunchPresent" type="button">🎁 公開記念プレゼント</button>
          </div>

          <!-- ✅ ここを修正：∞表記をやめる（無料廃止） -->
          <div class="hero-note" id="heroNote">
            ※無料資材は廃止。<b>全部オクトで買う</b>…たこ。<br>
            ※コラボのタネは<b>シリアル限定</b>…たこ。
          </div>

          <!-- ✅ 追加：常設シリアル入力（ここだけ足す） -->
          <div class="hero-serial" style="margin-top:10px;">
            <div style="font-weight:800; margin-bottom:6px;">🔑 シリアル入力（コラボのタネ）</div>
            <div style="display:flex; gap:8px; align-items:center;">
              <input
                id="serialInlineInput"
                type="text"
                inputmode="text"
                autocomplete="off"
                placeholder="例：TC-XXXX-XXXX"
                style="
                  flex:1;
                  min-width:0;
                  padding:10px 12px;
                  border-radius:12px;
                  border:1px solid rgba(255,255,255,.18);
                  background:rgba(0,0,0,.25);
                  color:#fff;
                  outline:none;
                "
              />
              <button class="btn" id="serialInlineBtn" type="button" style="white-space:nowrap;">
                使う
              </button>
            </div>
            <div
              id="serialInlineMsg"
              style="margin-top:6px; font-size:12px; opacity:.85;"
              aria-live="polite"
            ></div>
          </div>
          <!-- ✅ 追加ここまで -->

        </div>
      </div>
    </section>

    <!-- ====== ブロック分け：ショップ ====== -->
    <section class="block">
      <div class="block-head">
        <div class="block-title">購入（タップで買う）</div>
        <div class="block-sub">買った資材は <b>ファーム(tf_v1_inv)</b> に入る。</div>
      </div>

      <!-- 種/水/肥料タブ -->
      <div class="goods-tabs" aria-label="資材タブ">
        <button class="goods-tab is-active" data-kind="seed" type="button">種</button>
        <button class="goods-tab" data-kind="water" type="button">水</button>
        <button class="goods-tab" data-kind="fert" type="button">肥料</button>
      </div>

      <!-- 商品棚（2列タイル） -->
      <div class="goods-grid" id="goodsGrid"></div>
    </section>

  </main>

  <!-- ====== MODAL ====== -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="modal__backdrop" id="modalBg"></div>
    <div class="modal__sheet" role="dialog" aria-label="モーダル">
      <div class="modal__grab"></div>
      <div class="modal__head">
        <div class="modal__title" id="modalTitle">タイトル</div>
        <button class="btn modal__x" id="modalX" type="button">閉じる</button>
      </div>
      <div id="modalBody" class="modal__body"></div>
    </div>
  </div>

  <script src="assets/roten.js"></script>
</body>
</html>

