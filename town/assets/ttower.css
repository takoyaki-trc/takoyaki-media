:root{
  --bg: #0b0f14;
  --ink: #e9eef5;
  --muted: rgba(233,238,245,.7);
  --panel: rgba(0,0,0,.55);
  --panel2: rgba(255,255,255,.08);
  --meterW: 18px;
  --safeTop: env(safe-area-inset-top);
  --safeBottom: env(safe-area-inset-bottom);
}

*{ box-sizing:border-box; }
html,body{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  background:var(--bg);
  color:var(--ink);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
  overflow:hidden;
  touch-action: manipulation;
  user-select:none;
}

.game-wrap{
  position:fixed;
  inset:0;
}

canvas#world{
  width:100%;
  height:100%;
  display:block;
}

/* ===== HUD ===== */
.hud{
  position:fixed;
  top:calc(10px + var(--safeTop));
  left:10px;
  right:10px;
  z-index:20;
  pointer-events:none;
  display:flex;
  justify-content:space-between;
  gap:12px;
}

.hud-left{
  background:var(--panel);
  border:1px solid rgba(255,255,255,.12);
  border-radius:14px;
  padding:10px 12px;
  min-width: 210px;
  backdrop-filter: blur(6px);
}

.hud-floor, .hud-lv{
  display:flex;
  align-items:baseline;
  gap:8px;
  line-height:1;
}

.label{
  font-size:12px;
  color:var(--muted);
  letter-spacing:.08em;
}
.value{
  font-size:22px;
  font-weight:800;
}
.unit{
  font-size:12px;
  color:var(--muted);
}
.hud-name{
  margin-top:8px;
  font-size:12px;
  color:rgba(233,238,245,.92);
  line-height:1.25;
  max-width: 260px;
}

/* ===== Height Meter ===== */
.meter{
  display:flex;
  flex-direction:column;
  align-items:flex-end;
  gap:8px;
}

.meter-track{
  width:var(--meterW);
  height: 170px;
  border-radius:999px;
  background:rgba(255,255,255,.10);
  border:1px solid rgba(255,255,255,.14);
  overflow:hidden;
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
}

.meter-fill{
  width:100%;
  height:0%;
  background:rgba(233,238,245,.85);
  border-radius:999px;
  transform-origin: bottom;
  transition: height .18s linear;
}

.meter-mark{
  background:var(--panel);
  border:1px solid rgba(255,255,255,.12);
  border-radius:999px;
  padding:6px 10px;
  font-size:12px;
  color:rgba(233,238,245,.9);
}

/* ===== Overlay Screens ===== */
.overlay{
  position:fixed;
  inset:0;
  z-index:50;
  background: radial-gradient(1200px 900px at 50% 30%, rgba(255,255,255,.10), rgba(0,0,0,.88));
  display:none;
  align-items:center;
  justify-content:center;
  padding: 24px 18px calc(24px + var(--safeBottom));
}

.overlay.is-visible{
  display:flex;
}

.start-inner, .go-inner{
  width:min(420px, 92vw);
  text-align:center;
}

.start-img{
  width:min(320px, 78vw);
  height:auto;
  image-rendering: pixelated;
  filter: drop-shadow(0 16px 30px rgba(0,0,0,.45));
}

.start-hint{
  margin-top:14px;
  font-weight:800;
  letter-spacing:.14em;
  color:rgba(233,238,245,.9);
  font-size:14px;
}

.go-title{
  font-size:34px;
  font-weight:900;
  letter-spacing:.06em;
}
.go-sub{
  margin-top:8px;
  color:rgba(233,238,245,.85);
  font-weight:800;
  letter-spacing:.12em;
  font-size:12px;
}
.go-score{
  margin-top:14px;
  font-size:22px;
  font-weight:900;
}
.go-reason{
  margin-top:10px;
  font-size:12px;
  color:rgba(233,238,245,.8);
  line-height:1.35;
  padding:10px 12px;
  border-radius:14px;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.10);
}

@media (max-height: 700px){
  .meter-track{ height:140px; }
  .hud-left{ min-width: 190px; }
}
