/* =========================
  ✅ 町ページ：完全固定ベース
========================= */
html, body { margin:0; padding:0; width:100%; }
body{
  background:#ADC7C1;
  font-family: system-ui, -apple-system, "Hiragino Kaku Gothic ProN", "Noto Sans JP", sans-serif;
}

/* タイトル */
.title-gif{
  width:min(720px, 90%);
  margin: 14px auto 10px;
  display:block;
  image-rendering: pixelated;
}
.title-sub{
  width:min(520px, 90%);
  margin: 0 auto 14px;
  display:block;
  image-rendering: pixelated;
}

/* タイトル下タコ民エリア */
.takomin-area{
  width: min(800px, 92%);
  margin: 0 auto 10px;
  padding: 10px 10px;
}
.takomin-wrap{
  display:flex;
  gap:10px;
  align-items:center;
}
.takomin-avatar img{
  width: 56px;
  height: auto;
  image-rendering: pixelated;
}
.takomin-text{
  background:#000;
  color:#fff;
  padding:8px 10px;
  border-radius:8px;
  font-size: 14px;
  line-height: 1.35;
  max-width: min(520px, 80vw);
}

/* マップ枠 */
.map-wrap{
  position: relative;
  width: min(800px, 100%);
  margin: 0 auto 36px;
}

/* 背景マップ画像 */
.map-wrap .map-img{
  width: 100% !important;
  max-width: 100% !important;
  height: auto !important;
  display:block;
  image-rendering: pixelated;
  position: relative;
  z-index: 1;
}

/* 夜だけ表示 */
.night-only{ display:none; }
html.is-night .night-only{ display:block; }

/* =========================
  ✅ 祭壇：スポット共通
========================= */
.map-wrap .spot{
  position:absolute;
  display:block;
  transform: translate(-50%, -100%);
  width: clamp(124px, 12vw, 250px);
  padding: 0;
  border: 0;
  background: transparent;
  overflow: visible;
}

/* 見た目：祭壇の位置 */
.map-wrap .spot--gate{
  top: 67%;
  left: 52%;
  z-index: 10 !important;
  pointer-events: none !important;
}

/* 土台 */
.map-wrap .spot--gate .spot__base{
  display:block;
  width:100%;
  height:auto;
  image-rendering: pixelated;
  pointer-events: none !important;
}

/* アイコン（通常位置） */
.map-wrap .spot--gate .spot__icon{
  position:absolute;
  left:50%;
  top:42%;
  transform: translate(-50%, -50%);
  width: 110%;
  height: auto;
  image-rendering: pixelated;
  pointer-events: none !important;
  filter: drop-shadow(0 2px 0 rgba(0,0,0,.6));
}

/* ✅ 5分イベント用アイコンだけ +1.3% 上 */
.map-wrap .spot--gate .spot__icon[src*="Quyt1TAt"],
.map-wrap .spot--gate .spot__icon[src*="8ipISSBp"],
.map-wrap .spot--gate .spot__icon[src*="IShYv1or"],
.map-wrap .spot--gate .spot__icon[src*="UHcLPRSi"],
.map-wrap .spot--gate .spot__icon[src*="lLEWj0Pu"]{
  transform: translate(-50%, -50%) translateY(-1.3%) !important;
}

/* ✅ タップ判定 */
.map-wrap .gate-hit{
  position:absolute;
  top: 67% !important;
  left: 52% !important;
  transform: translate(-50%, -100%) !important;

  width: clamp(124px, 12vw, 250px);
  height: clamp(124px, 12vw, 250px);

  background: transparent;
  border: 0;
  padding: 0;
  cursor: pointer;

  z-index: 9999 !important;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

/* =========================
  ✅ タコ民（共通）
========================= */
.map-wrap .takomin{
  position: absolute;
  transform: translate(-50%, -100%);
  width: clamp(56px, 6vw, 64px);
  z-index: 60;
  background: transparent;
  border: 0;
  padding: 0;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}
.map-wrap .takomin img{
  width: 100%;
  height: auto;
  display: block;
  image-rendering: pixelated;
}

/* 吹き出し */
.map-wrap .takomin-balloon{
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  z-index: 999;
  display: none;
  background: #000;
  color: #fff;
  padding: 8px 12px;
  border-radius: 6px;
  font-size: clamp(11px, 2.8vw, 14px);
  width: max-content;
  max-width: min(420px, 85vw);
  white-space: pre-line;
  line-height: 1.4;
  pointer-events: none;
}

/* トップメニューだけ小さく */
.map-wrap .takomin.topmenu{
  width: clamp(38px, 4.3vw, 48px) !important;
}

/* 特大 */
.map-wrap .takomin[data-id="bigmans"]{ width: clamp(86px, 10vw, 140px); }
.map-wrap .takomin[data-id="twobit"]{ width: clamp(60px, 10vw, 140px); }
.map-wrap .takomin[data-id="me13"]{ width: clamp(130px, 10vw, 140px); }
.map-wrap .takomin[data-id="tawa"]{ width: clamp(130px, 10vw, 200px); }

/* 座標 */
.map-wrap .takomin--me1{ top:5%; left:29%; }
.map-wrap .takomin--me2{ top:3%; left:70%; }
.map-wrap .takomin--me3{ top:12.7%; left:32%; }
.map-wrap .takomin--me4{ top:13%; left:70%; }
.map-wrap .takomin--me5{ top:20.5%; left:50%; }
.map-wrap .takomin--me6{ top:23%; left:37%; }
.map-wrap .takomin--me7{ top:21.4%; left:76%; }
.map-wrap .takomin--me8{ top:30.5%; left:39%; }
.map-wrap .takomin--me9{ top:29%; left:68%; }
.map-wrap .takomin--me10{ top:38.5%; left:30%; }
.map-wrap .takomin--me12{ top:38%; left:70%; }
.map-wrap .takomin--me13{ top:68.8%; left:52%; }
.map-wrap .takomin--tawa{ top:95%; left:50%; }

.map-wrap .takomin--ghost{ top:72.9%; left:25%; }
.map-wrap .takomin--yousha{ top:65%; left:27%; }
.map-wrap .takomin--motoyu{ top:73%; left:50.8%; }
.map-wrap .takomin--kbc{ top:47.5%; left:75%; }
.map-wrap .takomin--katana{ top:47.3%; left:23%; }
.map-wrap .takomin--hotel{ top:58.4%; left:61%; }
.map-wrap .takomin--bigmans{ top:57.7%; left:24%; }
.map-wrap .takomin--twobit{ top:80%; left:25%; }
.map-wrap .takomin--hanaya{ top:65%; left:76%; }
.map-wrap .takomin--mars{ top:72.8%; left:77%; }
.map-wrap .takomin--dollis{ top:57.8%; left:75%; }

/* 釣り */
.map-wrap .takomin--fish{
  position:absolute;
  transform: translate(-50%, -100%);
  top: 85.6%;
  left: 70%;
}

/* 光 */
.takomin--glow img{
  filter:
    drop-shadow(0 0 2px rgba(255, 240, 150, 0.95))
    drop-shadow(0 0 6px rgba(255, 200, 80, 0.75))
    drop-shadow(0 0 14px rgba(255, 140, 20, 0.55));
}

/* =========================
  ✅ タコ民：動き
========================= */
@keyframes takominFloat { 0%,100%{ transform: translateY(0);} 50%{ transform: translateY(-3px);} }
@keyframes takominBob   { 0%,100%{ transform: translateY(0) rotate(0deg);} 50%{ transform: translateY(-2px) rotate(-1deg);} }
@keyframes takominShake { 0%,100%{ transform: translateX(0);} 20%{ transform: translateX(-1px);} 40%{ transform: translateX(1px);} 60%{ transform: translateX(-1px);} 80%{ transform: translateX(1px);} }
@keyframes takominStep  { 0%{ transform: translateY(0);} 25%{ transform: translateY(-1px);} 50%{ transform: translateY(0);} 75%{ transform: translateY(-1px);} 100%{ transform: translateY(0);} }

.map-wrap .takomin.is-float img{ animation: takominFloat 1.8s ease-in-out infinite; will-change: transform; }
.map-wrap .takomin.is-bob img{ animation: takominBob 1.6s ease-in-out infinite; will-change: transform; }
.map-wrap .takomin.is-shake img{ animation: takominShake .22s linear infinite; will-change: transform; }
.map-wrap .takomin.is-step img{ animation: takominStep .6s steps(2) infinite; will-change: transform; }

@media (prefers-reduced-motion: reduce){
  .map-wrap .takomin img{ animation: none !important; }
}

/* =========================
  ✅ ボスゲート（外部CSSがあっても保険）
========================= */
.boss-gate{
  position:absolute;
  top: 41.3%;
  left: 50%;
  transform: translateX(-50%);
  width: 18%;
  z-index: 12;
  display:block;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
}
.boss-gate img{
  width: 100%;
  height: auto;
  display:block;
  image-rendering: pixelated;
}
html.is-night .boss-gate{
  animation: bossPulse 1.6s ease-in-out infinite;
}
@keyframes bossPulse{
  0%{ transform: translateX(-50%) scale(1); opacity: 0.95; }
  50%{ transform: translateX(-50%) scale(1.04); opacity: 1; }
  100%{ transform: translateX(-50%) scale(1); opacity: 0.95; }
}

/* =========================
  ✅ GIF（位置は必要なら後で調整）
========================= */
.map-gif{
  position:absolute;
  left: 50%;
  top: 46%;
  transform: translateX(-50%);
  width: 60%;
  max-width: 520px;
  image-rendering: pixelated;
  z-index: 3;
  pointer-events: none;
}
.map2-gif{
  position:absolute;
  left: 50%;
  top: 62%;
  transform: translateX(-50%);
  width: 50%;
  max-width: 420px;
  image-rendering: pixelated;
  z-index: 3;
  pointer-events: none;
}


