<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>コラボ図鑑｜焼かれた伝説</title>
  <meta name="description" content="年号でまとめたコラボ図鑑。" />

  <style>
    :root{
      --text:#fff;
      --muted:rgba(255,255,255,.76);
      --line:rgba(255,255,255,.16);

      /* 背景（そのまま反映：黒被せ無し） */
      --bg-url: url("https://ul.h3z.jp/G7grA8Dy.png");

      /* パネルは“内容部分だけ”暗くして読みやすく（背景そのものには被せない） */
      --panel: rgba(16, 10, 14, .78);
      --panel2: rgba(10, 8, 12, .66);

      --gold:#f2d07a;
      --gold2:#b8943b;

      --blue:#2f8bff;
      --blue2:#0f5fbf;

      --shadow: 0 18px 55px rgba(0,0,0,.55);
      --shadow2: 0 10px 22px rgba(0,0,0,.35);

      --radius: 14px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      color:var(--text);
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", sans-serif;
      background-image: var(--bg-url);
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;
      overflow-x:hidden;
    }

    a{color:inherit;text-decoration:none}
    button{font:inherit}

    /* ===== Film frame（縁取り） ===== */
    .frame{
      position: fixed;
      inset: 10px;
      pointer-events:none;
      z-index: 1;
      border-radius: 18px;
      border: 2px solid rgba(242,208,122,.55);
      box-shadow: inset 0 0 0 2px rgba(0,0,0,.18);
    }
    .frame::before,
    .frame::after{
      content:"";
      position:absolute;
      top:10px; bottom:10px;
      width:14px;
      background:
        linear-gradient(to bottom,
          rgba(242,208,122,.55) 0 8px,
          transparent 8px 16px) repeat-y;
      background-size: 14px 16px;
      opacity:.65;
    }
    .frame::before{ left:10px; }
    .frame::after { right:10px; }

    /* ===== Header ===== */
    .header{
      position: sticky;
      top:0;
      z-index: 5;
      padding: 10px 10px 8px;
    }
    .headbar{
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 10px;
      border-radius: 14px;
      background: rgba(40, 14, 20, .78);
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: var(--shadow2);
      backdrop-filter: blur(6px);
    }
    .back{
      width:46px; height:46px;
      display:grid; place-items:center;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.22);
      color:#fff;
      border-radius: 10px;
      cursor:pointer;
    }
    .titlebox{min-width:0;flex:1}
    .title{
      font-weight: 1000;
      letter-spacing:.04em;
      font-size: 18px;
      line-height: 1.15;
    }

    /* ===== Wrap ===== */
    .wrap{
      position: relative;
      z-index: 2;
      max-width: 980px;
      margin: 0 auto;
      padding: 8px 12px 44px;
    }

    /* ===== Top banner ===== */
    .banner{
      border-radius: 16px;
      border:1px solid rgba(242,208,122,.40);
      background: rgba(18, 10, 14, .72);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
      padding: 14px 14px 12px;
      margin: 6px 0 10px;
      backdrop-filter: blur(6px);
    }
    .banner::before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(900px 260px at 18% 0%, rgba(242,208,122,.24), transparent 60%),
        radial-gradient(700px 220px at 80% 15%, rgba(47,139,255,.16), transparent 60%),
        radial-gradient(520px 240px at 60% 95%, rgba(255,255,255,.08), transparent 65%);
      pointer-events:none;
      opacity:.95;
    }
    .banner > *{position:relative}
    .banner h1{
      margin:0;
      font-size: 16px;
      font-weight:1000;
      letter-spacing:.05em;
    }
    .banner p{
      margin:8px 0 0;
      color: rgba(255,255,255,.86);
      font-size: 12.5px;
      line-height: 1.65;
      font-weight: 900;
    }

    /* ===== Section ===== */
    .year{
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(10, 8, 12, .58);
      box-shadow: var(--shadow2);
      overflow:hidden;
      backdrop-filter: blur(6px);
    }
    .year + .year{ margin-top: 12px; }

    .year-head{
      display:flex;
      align-items:center;
      gap:10px;
      padding: 12px 12px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
    }
    .year-num{
      font-size: 22px;
      font-weight: 1000;
      letter-spacing:.04em;
    }
    .year-sub{
      color: rgba(255,255,255,.78);
      font-weight: 900;
      font-size: 12px;
      letter-spacing:.02em;
    }

    /* ===== List rows ===== */
    .list{
      padding: 10px;
      display:grid;
      gap: 10px;
    }

    .sectionCap{
      display:flex;
      align-items:center;
      gap:10px;
      margin: 6px 2px 0;
      padding: 6px 2px 0;
      color: rgba(255,255,255,.78);
      font-weight:1000;
      font-size: 12px;
      letter-spacing:.02em;
    }
    .capLine{
      flex:1;
      height:1px;
      background: rgba(255,255,255,.10);
    }

    .row{
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.22);
      box-shadow: var(--shadow2);
      padding: 10px 10px;
      display:flex;
      align-items:center;
      gap: 10px;
      cursor:pointer;
      min-width: 0;
    }
    .row:active{ transform: translateY(1px); }

    .thumb{
      width: 64px;
      height: 64px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.25);
      overflow:hidden;
      flex: 0 0 auto;
      display:grid;
      place-items:center;
    }
    .thumb img{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
    }
    .thumb .ph{
      font-weight:1000;
      color: rgba(255,255,255,.70);
      font-size: 12px;
      padding: 0 6px;
      text-align:center;
      white-space: pre-line;
    }

    .row-main{ min-width:0; flex:1 1 auto; }
    .row-title{
      font-weight: 1000;
      font-size: 16px;
      letter-spacing:.02em;
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
      max-width: 100%;
    }
    .row-meta{
      margin-top: 4px;
      display:flex;
      align-items:center;
      gap: 8px;
      flex-wrap: wrap;
      color: rgba(255,255,255,.78);
      font-weight: 900;
      font-size: 12px;
      min-width:0;
    }
    .row-meta .k{opacity:.85}

    .badges{
      display:flex;
      align-items:center;
      gap: 8px;
      flex: 0 0 auto;
      min-width: 0;
    }
    .badge{
      padding: 8px 10px;
      border-radius: 0px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.20);
      font-weight:1000;
      letter-spacing:.02em;
      font-size: 13px;
      line-height:1;
      text-align:center;
      white-space:nowrap;
    }
    .badge.paper{
      border-color: rgba(242,208,122,.55);
      background: rgba(242,208,122,.16);
      color:#fff;
    }
    .badge.digital{
      border-color: rgba(47,139,255,.65);
      background: rgba(47,139,255,.18);
      color:#fff;
    }

    .chev{
      width: 34px;
      height: 34px;
      display:grid;
      place-items:center;
      border-radius: 10px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      color:#fff;
      flex: 0 0 auto;
      font-weight:1000;
    }

    /* ===== Modal ===== */
    .modal{
      position: fixed;
      inset: 0;
      z-index: 50;
      display:none;
      background: rgba(0,0,0,.70);
      backdrop-filter: blur(8px);
      padding: 14px;
      align-items: center;
      justify-content: center;
    }
    .modal[aria-hidden="false"]{ display:flex; }

    .mcard{
      width: min(980px, 100%);
      max-height: min(92vh, 920px);
      overflow:auto;
      border-radius: 16px;
      border: 1px solid rgba(242,208,122,.35);
      background: rgba(18, 10, 14, .92);
      box-shadow: 0 28px 90px rgba(0,0,0,.78);
    }
    .mtop{
      position: sticky;
      top:0;
      z-index: 2;
      display:flex;
      align-items:center;
      gap:10px;
      padding: 12px 12px;
      border-bottom: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.22);
      backdrop-filter: blur(6px);
    }
    .mtitle{
      font-weight:1000;
      letter-spacing:.03em;
      font-size: 14px;
      min-width:0;
      overflow:hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      flex:1;
    }
    .mclose{
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.22);
      color:#fff;
      padding: 10px 12px;
      cursor:pointer;
      font-weight:1000;
    }

    .mbody{ padding: 12px; display:grid; gap: 12px; }

    .block{
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.20);
      box-shadow: var(--shadow2);
      padding: 12px;
    }

    /* ===== Profile ===== */
    .profile{
      display:grid;
      grid-template-columns: 110px 1fr;
      gap: 12px;
      align-items: start;
      min-width:0;
    }
    .pimg{
      width: 110px;
      height: 110px;
      border-radius: 12px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.22);
    }
    .pimg img{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
    }

    .ptext{min-width:0}
    .ptext .name{
      margin:0;
      font-weight:1000;
      font-size: 18px;
      letter-spacing:.02em;
      line-height:1.2;
    }
    .ptext .small{
      margin-top:6px;
      color: rgba(255,255,255,.82);
      font-weight:900;
      font-size: 12px;
    }
    .ptext .desc{
      margin:10px 0 0;
      color: rgba(255,255,255,.86);
      font-weight:900;
      font-size: 13px;
      line-height: 1.75;
      white-space: pre-wrap;
    }

    .plink{
      margin-top:10px;
      display:grid;
      gap: 8px;
      max-width: 260px;
    }
    .plink a{
      display:block;
      text-align:center;
      padding: 8px 10px;
      border-radius: 0px;
      border: 1px solid rgba(47,139,255,.72);
      background: rgba(47,139,255,.22);
      color:#fff;
      font-weight:1000;
      letter-spacing:.02em;
    }
    .plink a.alt{
      border-color: rgba(242,208,122,.55);
      background: rgba(242,208,122,.16);
    }
    .plink a.disabled{
      opacity:.55;
      pointer-events:none;
      filter: grayscale(1);
    }

    /* ===== Seed ===== */
    .seed{
      display:grid;
      grid-template-columns: 100px 1fr;
      gap: 12px;
      align-items: start;
      min-width:0;
    }
    .seedbox{
      width: 100px;
      height: 100px;
      border-radius: 12px;
      overflow:hidden;
      border: 1px solid rgba(242,208,122,.40);
      background: rgba(0,0,0,.18);
      display:grid;
      place-items:center;
    }
    .seedbox img{
      width:100%;
      height:100%;
      object-fit: contain;
      display:block;
      background: rgba(0,0,0,.10);
    }
    .seedtext{min-width:0}
    .seedtext .topline{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
    }
    .label-digital{
      display:inline-block;
      padding: 6px 10px;
      border-radius: 0px;
      border: 1px solid rgba(47,139,255,.70);
      background: rgba(47,139,255,.18);
      font-weight:1000;
      letter-spacing:.02em;
      font-size: 12px;
      line-height: 1;
      white-space:nowrap;
    }
    .label-paper{
      display:inline-block;
      padding: 6px 10px;
      border-radius: 0px;
      border: 1px solid rgba(242,208,122,.65);
      background: rgba(242,208,122,.16);
      font-weight:1000;
      letter-spacing:.02em;
      font-size: 12px;
      line-height: 1;
      white-space:nowrap;
    }
    .seedtext .stitle{
      font-weight:1000;
      letter-spacing:.02em;
      font-size: 14px;
    }
    .seedtext .sdesc{
      margin:8px 0 0;
      color: rgba(255,255,255,.86);
      font-weight:900;
      font-size: 13px;
      line-height: 1.75;
      white-space: pre-wrap;
    }

    /* ===== Cards ===== */
    .cards{
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
    }
    .c{
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      overflow:hidden;
      box-shadow: var(--shadow2);
      min-width:0;
    }
    .cimg{
      aspect-ratio: 5 / 7;
      background: rgba(0,0,0,.22);
      display:grid;
      place-items:center;
      border-bottom: 1px solid rgba(255,255,255,.10);
      padding: 8px;
    }
    .cimg img{
      width:100%;
      height:100%;
      object-fit: contain;
      display:block;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.45));
    }
    .cmeta{
      padding: 10px 10px;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
      min-width:0;
    }
    .cno{
      font-weight:1000;
      letter-spacing:.03em;
      font-size: 14px;
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }
    .ctags{
      display:flex;
      gap: 8px;
      flex-wrap:wrap;
      justify-content: flex-end;
    }
    .miniBadge{
      padding: 6px 10px;
      border-radius: 0px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.18);
      font-weight:1000;
      font-size: 12px;
      line-height: 1;
      text-align:center;
      white-space:nowrap;
    }
    .miniBadge.paper{
      border-color: rgba(242,208,122,.60);
      background: rgba(242,208,122,.18);
    }
    .miniBadge.digital{
      border-color: rgba(47,139,255,.70);
      background: rgba(47,139,255,.20);
    }

    .note{
      color: rgba(255,255,255,.86);
      font-weight:900;
      font-size: 12.5px;
      line-height: 1.65;
      margin:0;
      white-space: pre-wrap;
    }

    @media (max-width:360px){
      .thumb{ width:56px; height:56px; border-radius: 10px; }
      .badge{ padding: 7px 8px; font-size: 12px; }
      .chev{ width:32px; height:32px; }
      .row{ gap:8px; padding: 9px 9px; }
      .row-title{ font-size: 15px; }
    }

    @media (max-width:380px){
      .profile{ grid-template-columns: 98px 1fr; }
      .pimg{ width:98px; height:98px; }
      .seed{ grid-template-columns: 92px 1fr; }
      .seedbox{ width:92px; height:92px; }
    }
  </style>
</head>

<body>
  <div class="frame" aria-hidden="true"></div>

  <header class="header">
    <div class="headbar">
      <button class="back" id="backBtn" type="button" aria-label="戻る">←</button>
      <div class="titlebox">
        <div class="title">コラボ図鑑</div>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="banner" aria-label="案内">
      <h1>焼かれた記録 — コラボ年表</h1>
      <p>
        ✅ シリアルで増えるのはカードではなく「コラボのタネ」。<br>
        ✅ 畑で育てて収穫した瞬間、デジタルカードとして図鑑に刻まれます。<br>
        ✅ ダーツプロのタネは《ブッ刺さりのタネ》：全5種類のレジェンドカードが排出。
      </p>
    </section>

    <!-- ✅ 2026：配信者 / インフルエンサー -->
    <section class="year" aria-label="2026年">
      <div class="year-head">
        <div class="year-num">2026年</div>
        <div class="year-sub">配信者 / インフルエンサー</div>
      </div>
      <div class="list" id="list2026"></div>
    </section>

    <!-- ✅ 2025：ダーツプロ（期限なし） -->
    <section class="year" aria-label="2025年">
      <div class="year-head">
        <div class="year-num">2025年</div>
        <div class="year-sub">ダーツプロコラボ（期限なし）</div>
      </div>
      <div class="list" id="list2025"></div>
    </section>

    <!-- ✅ ガイド（年表の一番下・共通） -->
    <section class="year" aria-label="ガイド">
      <div class="year-head">
        <div class="year-num">ガイド</div>
        <div class="year-sub">入手の流れ / 紙の購入案内</div>
      </div>
      <div class="list" id="listGuide"></div>
    </section>
  </main>

  <!-- Modal -->
  <div class="modal" id="modal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="mcard" role="document">
      <div class="mtop">
        <div class="mtitle" id="mTitle">—</div>
        <button class="mclose" id="mClose" type="button">閉じる</button>
      </div>
      <div class="mbody" id="mBody"></div>
    </div>
  </div>

  <script>
  (() => {
    "use strict";

    // =========================
    // ✅ データ
    // =========================

    // ✅ 2026：配信者 / インフルエンサー
    const GURATAN = {
      id: "guratan",
      title: "ぐらたん",
      period: "2026.2.24〜3.24",
      badges: ["デジタル"],
      thumb: "https://ul.h3z.jp/zXzQtZGi.png",
      profile: {
        name: "配信者《ぐらたん》",
        period: "2026.2.24〜3.24",
        img: "https://ul.h3z.jp/zXzQtZGi.png",
        desc:
`深夜の配信回線に住み着いた語り手。
声は低く、語りは静か。
だが一度聞けたなら、なぜか最後まで残ってしまう。`,
        xUrl: "https://x.com/guratan_hkn?s=20",
      },
      seed: {
        label: "デジタル",
        title: "ぐらたんのタネ",
        img: "https://ul.h3z.jp/A0cSWxi8.png",
        desc:
`今回、彼の回線の奥から不思議な種が採取された。
植えれば何かが生まれる。だが何が出るかは保証されない。
それでも、植えたくなる種だ。`
      },
      cards: [
        { no: "—", img: "https://ul.h3z.jp/gAECOcHe.png", kind: "デジタル" },
        { no: "—", img: "https://ul.h3z.jp/gAECOcHe.png", kind: "デジタル" }
      ]
    };

    // ✅ 2025：ダーツプロ（期限なし）
    // ★紙の購入先は「ナンバーで分かれる」ので、カードごとに設定できるようにしてあります。
    const DARTS_PROS_2025 = [
      {
        key:"BS-001",
        name:"對馬裕佳子",
        thumb:"https://ul.h3z.jp/17BlYGxb.png",
        paper:{ no:"TN-022", img:"https://ul.h3z.jp/z0f9hr0X.png" },
        digital:{ no:"BS-001", img:"https://ul.h3z.jp/9TKXVZZz.png" },

        // ✅ ここをあなたのルール通りに直す（店頭 / BOOTH）
        paperWhere:"店頭",         // ←「BOOTH」などに変更OK
        paperBuyUrl:"",            // ←BOOTHの個別URLがあるなら入れる（無ければ空でOK）

        profile:{ img:"https://ul.h3z.jp/17BlYGxb.png", desc:"ダーツプロコラボ（紙＋デジタル）。※期限なし", xUrl:"https://x.com/tsushimayukako?s=20" }
      },
      {
        key:"BS-002",
        name:"佐俣雄一郎",
        thumb:"https://ul.h3z.jp/MSfNOomU.png",
        paper:{ no:"TN-048", img:"https://ul.h3z.jp/ge8b4cQ5.jpg" },
        digital:{ no:"BS-002", img:"https://ul.h3z.jp/BtOTLlSo.png" },

        paperWhere:"BOOTH",
        paperBuyUrl:"",            // ←ここにBOOTHの該当ページURLを入れてOK

        profile:{ img:"https://ul.h3z.jp/MSfNOomU.png", desc:"ダーツプロコラボ（紙＋デジタル）。※期限なし", xUrl:"https://x.com/samata0225?s=20" }
      },
      {
        key:"BS-003",
        name:"井上諒",
        thumb:"https://ul.h3z.jp/mEXBlSdC.png",
        paper:{ no:"TN-028", img:"https://ul.h3z.jp/sPChFFlG.jpg" },
        digital:{ no:"BS-003", img:"https://ul.h3z.jp/P5vsAste.png" },

        paperWhere:"BOOTH",
        paperBuyUrl:"",

        profile:{ img:"https://ul.h3z.jp/mEXBlSdC.png", desc:"ダーツプロコラボ（紙＋デジタル）。※期限なし", xUrl:"https://x.com/DMmakku?s=20" }
      },
      {
        key:"BS-004",
        name:"仁木治",
        thumb:"https://ul.h3z.jp/KvghKU7e.png",
        paper:{ no:"TN-029", img:"https://ul.h3z.jp/4HEbt3YP.jpg" },
        digital:{ no:"BS-004", img:"https://ul.h3z.jp/ZGBzzH2r.png" },

        paperWhere:"BOOTH",
        paperBuyUrl:"",

        profile:{ img:"https://ul.h3z.jp/KvghKU7e.png", desc:"ダーツプロコラボ（紙＋デジタル）。※期限なし", xUrl:"https://x.com/awesome_hnysk?s=20" }
      },
      {
        key:"BS-005",
        name:"稲石裕",
        thumb:"https://ul.h3z.jp/E3Oo4QkO.png",
        paper:{ no:"TN-044", img:"https://ul.h3z.jp/bC1B4WkQ.jpg" },
        digital:{ no:"BS-005", img:"https://ul.h3z.jp/nmiaCKae.png" },

        paperWhere:"BOOTH",
        paperBuyUrl:"",

        profile:{ img:"https://ul.h3z.jp/E3Oo4QkO.png", desc:"ダーツプロコラボ（紙＋デジタル）。※期限なし", xUrl:"https://x.com/tawashi1714?s=20" }
      }
    ];

    // ✅ ダーツ：ブッ刺さりのタネ（全5種類のレジェンド）
    const DARTS_SEED = {
      label:"デジタル",
      title:"ブッ刺さりのタネ（ダーツ）",
      img:"https://ul.h3z.jp/DTJQPegs.png",
      desc:
`ダーツプロコラボで使うのは《ブッ刺さりのタネ》。
このタネからは、全5種類のレジェンドカードが排出されます。`
    };

    // ✅ ガイド（年表共通）
    const FLOW = {
      id:"flow",
      title:"【入手の流れ（超重要）】",
      period:"",
      badges:[],
      thumb:"https://ul.h3z.jp/U5J7OGeO.png",
      text:
`【デジタル（ゲーム内）】
シリアルコードで“カード”が直接もらえるわけではありません。
シリアルで増えるのは「コラボのタネ」。
→ 畑に植える → 育てる → 収穫した瞬間に、デジタルカードとして図鑑に記録されます。

【ダーツプロ：ブッ刺さりのタネ】
ダーツプロのタネは《ブッ刺さりのタネ》。
このタネからは全5種類のレジェンドカードが排出されます。

【紙（現物）】
紙のカードは、カードナンバーによって
「店頭」または「BOOTH」で購入できます。
（各ダーツプロの詳細ページに、購入先の案内を表示しています）

※紙（現物）とデジタル（ゲーム内）は別物として表示しています。`
    };

    // =========================
    // DOM
    // =========================
    const $ = (q) => document.querySelector(q);
    const list2026 = $("#list2026");
    const list2025 = $("#list2025");
    const listGuide = $("#listGuide");
    const modal = $("#modal");
    const mTitle = $("#mTitle");
    const mBody  = $("#mBody");
    const mClose = $("#mClose");

    $("#backBtn").addEventListener("click", () => history.back());

    // =========================
    // helpers
    // =========================
    function el(tag, cls="", txt=""){
      const e = document.createElement(tag);
      if(cls) e.className = cls;
      if(txt !== "") e.textContent = txt;
      return e;
    }
    function makeBadge(label){
      return el("div", "badge " + (label==="紙" ? "paper" : "digital"), label);
    }
    function makeMiniBadge(kind){
      return el("span", "miniBadge " + (kind==="紙" ? "paper" : "digital"), kind);
    }
    function makeThumb(src, fallbackText=""){
      const box = el("div","thumb");
      if(src){
        const img = document.createElement("img");
        img.src = src;
        img.alt = "";
        box.appendChild(img);
      }else{
        box.appendChild(el("div","ph", fallbackText || "画像\n準備中"));
      }
      return box;
    }

    function openModal(title, contentNode){
      mTitle.textContent = title;
      mBody.innerHTML = "";
      mBody.appendChild(contentNode);
      modal.setAttribute("aria-hidden","false");
      document.body.style.overflow = "hidden";
    }
    function closeModal(){
      modal.setAttribute("aria-hidden","true");
      document.body.style.overflow = "";
    }
    mClose.addEventListener("click", closeModal);
    modal.addEventListener("click", (e)=>{ if(e.target === modal) closeModal(); });
    document.addEventListener("keydown", (e)=>{ if(e.key==="Escape" && modal.getAttribute("aria-hidden")==="false") closeModal(); });

    function linkBtn(text, url, cls=""){
      const a = document.createElement("a");
      a.textContent = text;
      a.className = cls || "";
      if(url){
        a.href = url;
        a.target = "_blank";
        a.rel = "noopener";
      }else{
        a.href = "javascript:void(0)";
        a.classList.add("disabled");
      }
      return a;
    }

    // ✅ periodが空なら行内の期間を出さない（ガイドも消える）
    function makeRow({thumb, title, period, badges}, onClick){
      const row = el("div","row");
      row.appendChild(makeThumb(thumb, "サムネ\n準備中"));

      const main = el("div","row-main");
      main.appendChild(el("div","row-title", title));

      if(period){
        const meta = el("div","row-meta");
        meta.appendChild(el("div","k", period));
        main.appendChild(meta);
      }

      const bwrap = el("div","badges");
      (badges||[]).forEach(b => bwrap.appendChild(makeBadge(b)));

      const chev = el("div","chev","▼");

      row.appendChild(main);
      row.appendChild(bwrap);
      row.appendChild(chev);

      row.addEventListener("click", onClick);
      return row;
    }

    function sectionCap(text){
      const cap = el("div","sectionCap");
      cap.appendChild(el("div","k", text));
      cap.appendChild(el("div","capLine"));
      return cap;
    }

    function cardTile(card){
      const wrap = el("div","c");
      const imgBox = el("div","cimg");
      if(card.img){
        const img = document.createElement("img");
        img.src = card.img;
        img.alt = card.no || "card";
        imgBox.appendChild(img);
      }else{
        imgBox.appendChild(el("div","ph","画像\n準備中"));
      }

      const meta = el("div","cmeta");
      const left = el("div","cno", card.no || "—");
      const right = el("div","ctags");
      right.appendChild(makeMiniBadge(card.kind || "デジタル"));

      meta.appendChild(left);
      meta.appendChild(right);

      wrap.appendChild(imgBox);
      wrap.appendChild(meta);
      return wrap;
    }

    function profileBlock(p){
      const b = el("section","block");
      const grid = el("div","profile");

      const imgBox = el("div","pimg");
      if(p.img){
        const img = document.createElement("img");
        img.src = p.img;
        img.alt = p.name || "";
        imgBox.appendChild(img);
      }else{
        imgBox.appendChild(el("div","ph","画像\n準備中"));
      }

      const tx = el("div","ptext");
      const name = el("h2","name", p.name || "—");
      const small = p.period ? el("div","small", `期間：${p.period}`) : null;
      const desc = el("p","desc", p.desc || "");

      const links = el("div","plink");
      if(p.xUrl) links.appendChild(linkBtn("X", p.xUrl, ""));
      if(p.paperBuyUrl){
        links.appendChild(linkBtn("BOOTHで購入", p.paperBuyUrl, "alt"));
      }

      tx.appendChild(name);
      if(small) tx.appendChild(small);
      tx.appendChild(desc);
      if(links.childNodes.length) tx.appendChild(links);

      grid.appendChild(imgBox);
      grid.appendChild(tx);
      b.appendChild(grid);
      return b;
    }

    function seedBlock(s){
      const b = el("section","block");
      const grid = el("div","seed");

      const imgBox = el("div","seedbox");
      if(s.img){
        const img = document.createElement("img");
        img.src = s.img;
        img.alt = s.title || "seed";
        imgBox.appendChild(img);
      }else{
        imgBox.appendChild(el("div","ph","タネ画像\n準備中"));
      }

      const tx = el("div","seedtext");
      const top = el("div","topline");
      top.appendChild(el("span","label-digital", s.label || "デジタル"));
      top.appendChild(el("div","stitle", s.title || "—"));

      const desc = el("p","sdesc", s.desc || "");

      tx.appendChild(top);
      tx.appendChild(desc);

      grid.appendChild(imgBox);
      grid.appendChild(tx);
      b.appendChild(grid);
      return b;
    }

    function infoBlock(title, text){
      const b = el("section","block");
      const t = el("div","seedtext");
      const top = el("div","topline");
      top.appendChild(el("span","label-paper","案内"));
      top.appendChild(el("div","stitle", title));
      t.appendChild(top);
      t.appendChild(el("p","sdesc", text));
      b.appendChild(t);
      return b;
    }

    function cardsBlock(cards){
      const b = el("section","block");
      const grid = el("div","cards");
      (cards||[]).slice(0,2).forEach(c => grid.appendChild(cardTile(c)));
      b.appendChild(grid);
      return b;
    }

    function flowModalContent(flow){
      const wrap = document.createElement("div");
      wrap.style.display = "grid";
      wrap.style.gap = "12px";
      const b = el("section","block");
      b.appendChild(el("p","note", flow.text));
      wrap.appendChild(b);
      return wrap;
    }

    function guratanModalContent(){
      const wrap = document.createElement("div");
      wrap.style.display = "grid";
      wrap.style.gap = "12px";

      wrap.appendChild(profileBlock(GURATAN.profile));
      wrap.appendChild(seedBlock(GURATAN.seed));
      wrap.appendChild(cardsBlock(GURATAN.cards));

      return wrap;
    }

    function proModalContent(pro){
      const wrap = document.createElement("div");
      wrap.style.display = "grid";
      wrap.style.gap = "12px";

      // プロフィール（＋X）
      wrap.appendChild(profileBlock({
        name: pro.name,
        period: "", /* ✅ 期限なし：期間表示しない */
        img: pro.profile.img,
        desc: pro.profile.desc,
        xUrl: pro.profile.xUrl,
        paperBuyUrl: pro.paperBuyUrl
      }));

      // ✅ 紙の購入案内（ナンバーで店頭/BOOTHが分かれる）
      const paperInfo =
`紙カード：${pro.paper.no}
入手先：${pro.paperWhere || "店頭 / BOOTH"}

※紙カードは「ナンバー」によって
店頭またはBOOTHで購入できます。`;
      wrap.appendChild(infoBlock("紙カードの入手先", paperInfo));

      // ✅ ブッ刺さりのタネ（共通）
      wrap.appendChild(seedBlock(DARTS_SEED));

      // カード表示（紙＋デジタル）
      wrap.appendChild(cardsBlock([
        { no: pro.paper.no, img: pro.paper.img, kind:"紙" },
        { no: pro.digital.no, img: pro.digital.img, kind:"デジタル" }
      ]));

      return wrap;
    }

    // =========================
    // Render
    // =========================
    function render2026(){
      list2026.innerHTML = "";
      list2026.appendChild(sectionCap("配信者 / インフルエンサー"));
      list2026.appendChild(
        makeRow(
          { thumb:GURATAN.thumb, title:GURATAN.title, period:GURATAN.period, badges:GURATAN.badges },
          () => openModal(GURATAN.title, guratanModalContent())
        )
      );
    }

    function render2025(){
      list2025.innerHTML = "";
      list2025.appendChild(sectionCap("ダーツプロコラボ（紙＋デジタル）"));
      DARTS_PROS_2025.forEach(pro => {
        list2025.appendChild(
          makeRow(
            { thumb:pro.thumb, title:pro.name, period:"", badges:["紙","デジタル"] },
            () => openModal(pro.name, proModalContent(pro))
          )
        );
      });
    }

    function renderGuide(){
      listGuide.innerHTML = "";
      listGuide.appendChild(
        makeRow(
          { thumb: FLOW.thumb, title: FLOW.title, period:"", badges:[] },
          () => openModal(FLOW.title, flowModalContent(FLOW))
        )
      );
    }

    render2026();
    render2025();
    renderGuide();

  })();
  </script>
</body>
</html>


