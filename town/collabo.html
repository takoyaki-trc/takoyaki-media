<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>ã‚³ãƒ©ãƒœã‚«ãƒ¼ãƒ‰å›³é‘‘ï½œç„¼ã‹ã‚ŒãŸä¼èª¬</title>
  <meta name="description" content="ç¾ç‰©ï¼ˆç´™ï¼‰ã®ã‚³ãƒ©ãƒœï¼ˆè²©å£²/éå£²å“ï¼‰ã¨ã€ä»Šå¾Œå¢—ãˆã‚‹ãƒ‡ã‚¸ã‚¿ãƒ«ï¼ˆã‚²ãƒ¼ãƒ å†…ï¼‰ã‚³ãƒ©ãƒœã‚’æ··ãœãšã«åˆ†ã‘ã¦è¦‹ã‚‰ã‚Œã‚‹å›³é‘‘ãƒšãƒ¼ã‚¸ã€‚" />

  <style>
    :root{
      --bg0:#070812;
      --bg1:#0b0d17;

      --text:#fff;
      --muted:rgba(255,255,255,.74);
      --muted2:rgba(255,255,255,.58);

      --panel:rgba(255,255,255,.06);
      --line:rgba(255,255,255,.12);
      --shadow: 0 14px 44px rgba(0,0,0,.55);
      --shadow2: 0 8px 22px rgba(0,0,0,.30);

      --gold:#f6d37a;
      --gold2:#d6b056;

      --radius:16px;
      --radius2:20px;

      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;

      /* âœ… ãƒˆãƒ¬ã‚«ç¸¦æ¯”ç‡ï¼ˆä¸€èˆ¬çš„ï¼‰ */
      --card-ratio: 5 / 7;
    }

    *{ box-sizing:border-box }
    html,body{ height:100% }

    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", sans-serif;
      color:var(--text);
      background:
        radial-gradient(1000px 540px at 20% 5%, rgba(246,211,122,.12), transparent 60%),
        radial-gradient(780px 520px at 78% 18%, rgba(140,200,255,.08), transparent 60%),
        radial-gradient(780px 520px at 60% 92%, rgba(255,255,255,.05), transparent 65%),
        linear-gradient(180deg, rgba(7,8,18,.92), rgba(11,13,23,.98)),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow-x:hidden;
    }

    a{ color:inherit; text-decoration:none }

    /* ===== Headerï¼ˆã‚³ãƒ³ãƒ‘ã‚¯ãƒˆï¼‰ ===== */
    .header{
      position:sticky;
      top:0;
      z-index:60;
      background: linear-gradient(to bottom, rgba(8,10,18,.92), rgba(8,10,18,.60));
      backdrop-filter: blur(14px);
      border-bottom:1px solid rgba(255,255,255,.10);
    }
    .head-inner{
      max-width:1100px;
      margin:0 auto;
      padding:10px 12px;
      display:flex;
      gap:10px;
      align-items:center;
    }
    .back{
      appearance:none;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.07);
      color:#fff;
      padding:10px 12px;
      border-radius: 14px;
      font-weight:1000;
      cursor:pointer;
      box-shadow: var(--shadow2);
    }
    .titlebox{ min-width:0; flex:1 }
    .title{
      font-weight:1000;
      font-size:16px;
      letter-spacing:.04em;
      line-height:1.15;
    }
    .subline{
      margin-top:3px;
      color:rgba(255,255,255,.70);
      font-size:11px;
      font-weight:900;
      letter-spacing:.02em;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
    }
    .badge{
      display:inline-flex;
      gap:6px;
      align-items:center;
      padding:4px 9px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      font-weight:1000;
      color:rgba(255,255,255,.82);
    }
    .badge.gold{
      border-color: rgba(246,211,122,.35);
      background: rgba(246,211,122,.10);
      color:#fff;
    }

    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding:12px 12px 46px;
    }

    /* ===== Topboxï¼ˆã‚´ãƒãƒ£ã¤ãå‰Šæ¸›ï¼šã“ã‚Œã ã‘ï¼‰ ===== */
    .topbox{
      border-radius: var(--radius2);
      border:1px solid rgba(246,211,122,.20);
      background: rgba(0,0,0,.16);
      box-shadow: var(--shadow2);
      padding:10px;
    }
    .tophead{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:10px;
      padding:2px 2px 8px;
    }
    .h1{
      margin:0;
      font-size:14px;
      font-weight:1000;
      letter-spacing:.04em;
    }
    .small{
      color: rgba(255,255,255,.66);
      font-size:11px;
      font-weight:900;
      letter-spacing:.02em;
      white-space:nowrap;
    }

    .tabs{
      display:flex;
      gap:8px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      border-radius: 16px;
      padding:6px;
    }
    .tab{
      flex:1;
      appearance:none;
      border:0;
      border-radius: 12px;
      padding:10px 10px;
      font-weight:1000;
      color:#fff;
      background: transparent;
      cursor:pointer;
      letter-spacing:.02em;
    }
    .tab[aria-selected="true"]{
      background: rgba(246,211,122,.14);
      box-shadow: inset 0 0 0 1px rgba(246,211,122,.26);
    }

    .subtabs{
      display:flex;
      gap:8px;
      margin-top:8px;
    }
    .subtab{
      flex:1;
      appearance:none;
      border-radius: 14px;
      padding:10px 10px;
      font-weight:1000;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color:#fff;
      cursor:pointer;
      letter-spacing:.02em;
    }
    .subtab[aria-pressed="true"]{
      border-color: rgba(246,211,122,.32);
      background: rgba(246,211,122,.12);
    }

    .searchrow{
      margin-top:8px;
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
    }
    .search{
      flex:1;
      min-width: 210px;
      display:flex;
      gap:10px;
      align-items:center;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      border-radius: 16px;
      padding:10px 12px;
    }
    .search .ico{ font-weight:1000; opacity:.9; user-select:none; }
    .search input{
      width:100%;
      border:0; outline:0;
      background: transparent;
      color:#fff;
      font-weight:900;
      font-size:13px;
      letter-spacing:.02em;
    }
    .sort{
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      color:#fff;
      padding:10px 12px;
      font-weight:1000;
      font-size:12px;
      letter-spacing:.02em;
      outline:none;
    }
    .count{
      margin-left:auto;
      padding:9px 10px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: rgba(255,255,255,.82);
      font-weight:1000;
      font-size:12px;
      white-space:nowrap;
    }

    /* ===== èª¬æ˜ï¼ˆçŸ­ãã€åˆ†ã‹ã‚Šã‚„ã™ãï¼‰ ===== */
    .note{
      margin-top:8px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      padding:10px 10px;
      line-height:1.6;
      font-size:12px;
      font-weight:900;
      color: rgba(255,255,255,.82);
    }
    .note b{ color: var(--gold); }
    .note .mini{ color: rgba(255,255,255,.62); font-weight:1000; }

    /* ===== Section lineï¼ˆä½™ç™½å‰Šæ¸›ï¼‰ ===== */
    .sectionline{
      margin:12px 2px 8px;
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .sectionline h2{
      margin:0;
      font-size:13px;
      font-weight:1000;
      letter-spacing:.04em;
      color: rgba(255,255,255,.92);
    }
    .sectionline .right{
      color: rgba(255,255,255,.65);
      font-size:11px;
      font-weight:1000;
      letter-spacing:.02em;
    }

    /* ===== Gridï¼ˆã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç–²ã‚Œã‚’æ¸›ã‚‰ã™ï¼‰ ===== */
    .grid{
      display:grid;
      gap:10px;                    /* âœ… gapåœ§ç¸® */
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
    @media (min-width:760px){
      .grid{ grid-template-columns: repeat(3, minmax(0, 1fr)); }
    }
    @media (min-width:1060px){
      .grid{ grid-template-columns: repeat(4, minmax(0, 1fr)); }
    }

    /* ===== Tileï¼ˆç¸¦æ¯”ç‡ã¯ç¶­æŒã€ä½™ç™½ã¯åœ§ç¸®ï¼‰ ===== */
    .tile{
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      box-shadow: 0 12px 34px rgba(0,0,0,.32);
      overflow:hidden;
      cursor:pointer;
      transition: transform .12s ease, border-color .12s ease, background .12s ease;
      position:relative;
    }
    .tile:active{ transform: scale(.99); }
    .tile:hover{
      border-color: rgba(246,211,122,.24);
      background: rgba(255,255,255,.06);
    }

    .art{
      position:relative;
      width:100%;
      aspect-ratio: var(--card-ratio);
      padding:8px;                 /* âœ… paddingåœ§ç¸® */
      background:
        radial-gradient(520px 240px at 20% 0%, rgba(246,211,122,.10), transparent 60%),
        linear-gradient(180deg, rgba(0,0,0,.22), rgba(0,0,0,.18));
      border-bottom:1px solid rgba(255,255,255,.08);
    }

    .frame{
      position:absolute;
      inset:8px;
      border-radius: 14px;
      border:1px solid rgba(246,211,122,.32);
      box-shadow:
        inset 0 0 0 1px rgba(255,255,255,.08),
        inset 0 0 18px rgba(246,211,122,.06);
      pointer-events:none;
    }
    .art img{
      position:absolute;
      inset:10px;
      width:calc(100% - 20px);
      height:calc(100% - 20px);
      object-fit: contain;
      display:block;
      border-radius: 12px;
      background: rgba(0,0,0,.20);
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.40));
    }

    .info{
      padding:8px 9px 10px;        /* âœ… åœ§ç¸® */
      display:grid;
      gap:5px;
    }
    .no{
      font-family: var(--mono);
      font-size:10.5px;
      color: rgba(255,255,255,.70);
      font-weight:900;
      letter-spacing:.04em;
    }
    .name{
      font-size:12.5px;
      font-weight:1000;
      letter-spacing:.02em;
      line-height:1.25;
      min-height: 2.5em; /* 2è¡Œåˆ†ç¢ºä¿ */
    }

    .tags{ display:flex; gap:6px; flex-wrap:wrap; }
    .tag{
      font-size:10.5px;
      font-weight:1000;
      padding:4px 7px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.14);
      color: rgba(255,255,255,.82);
      letter-spacing:.02em;
    }
    .tag.gold{
      border-color: rgba(246,211,122,.45);
      background: rgba(246,211,122,.12);
      color:#fff;
    }
    .tag.dim{
      color: rgba(255,255,255,.70);
      background: rgba(255,255,255,.04);
    }

    /* ===== Empty / Placeholder ===== */
    .empty{
      border-radius: var(--radius2);
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      box-shadow: var(--shadow2);
      padding:14px;
      color: rgba(255,255,255,.78);
      font-size:12px;
      font-weight:900;
      line-height:1.7;
    }
    .empty b{ color: var(--gold); }

    /* ===== Footer links ===== */
    .footer{
      margin-top:14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:space-between;
      align-items:center;
      padding:2px 2px 0;
      color: rgba(255,255,255,.56);
      font-size:12px;
      font-weight:900;
      letter-spacing:.02em;
    }
    .links{ display:flex; gap:10px; flex-wrap:wrap; }
    .btnlink{
      color:#fff;
      font-weight:1000;
      border-radius: 16px;
      padding:10px 12px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      box-shadow: var(--shadow2);
    }
    .btnlink.gold{
      border-color: rgba(246,211,122,.35);
      background: rgba(246,211,122,.10);
    }

    /* ===== Modalï¼ˆã‚«ãƒ¼ãƒ‰ãŒä¸»å½¹ï¼‰ ===== */
    .modal{
      position:fixed;
      inset:0;
      z-index:200;
      display:none;
      align-items:center;
      justify-content:center;
      padding:14px;
      background: rgba(0,0,0,.72);
      backdrop-filter: blur(10px);
    }
    .modal[aria-hidden="false"]{ display:flex; }

    .modal-card{
      width:min(920px, 100%);
      border-radius: 22px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(10,12,24,.96);
      box-shadow: 0 26px 85px rgba(0,0,0,.78);
      overflow:hidden;
    }

    .modal-top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:10px 10px;
      border-bottom:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
    }
    .modal-top .mn{
      font-weight:1000;
      font-size:13px;
      letter-spacing:.02em;
      min-width:0;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .modal-top .close{
      appearance:none;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.08);
      color:#fff;
      border-radius: 14px;
      padding:10px 12px;
      font-weight:1000;
      cursor:pointer;
    }

    .modal-body{
      display:grid;
      gap:0;
      grid-template-columns: 1fr;
    }
    @media (min-width:900px){
      .modal-body{ grid-template-columns: 1.25fr .75fr; }
    }

    .modal-art{
      padding:12px;
      background: rgba(0,0,0,.18);
      border-bottom:1px solid rgba(255,255,255,.10);
    }
    @media (min-width:900px){
      .modal-art{ border-bottom:0; border-right:1px solid rgba(255,255,255,.10); }
    }

    .modal-cardbox{
      width:100%;
      aspect-ratio: var(--card-ratio);
      border-radius: 20px;
      position:relative;
      background:
        radial-gradient(650px 280px at 20% 0%, rgba(246,211,122,.12), transparent 60%),
        linear-gradient(180deg, rgba(0,0,0,.26), rgba(0,0,0,.18));
      border:1px solid rgba(246,211,122,.26);
      box-shadow: 0 18px 50px rgba(0,0,0,.50);
      overflow:hidden;
      margin:0 auto;
      max-width: 520px;
    }
    .modal-cardbox::before{
      content:"";
      position:absolute;
      inset:12px;
      border-radius: 16px;
      border:1px solid rgba(246,211,122,.38);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.08);
      pointer-events:none;
    }
    .modal-cardbox img{
      position:absolute;
      inset:16px;
      width:calc(100% - 32px);
      height:calc(100% - 32px);
      object-fit: contain;
      border-radius: 14px;
      background: rgba(0,0,0,.20);
      filter: drop-shadow(0 12px 22px rgba(0,0,0,.55));
    }

    .modal-info{
      padding:12px;
      display:grid;
      gap:10px;
    }
    .modal-tags{ display:flex; gap:6px; flex-wrap:wrap; }
    .modal-desc{
      margin:0;
      color: rgba(255,255,255,.82);
      font-size:12.5px;
      line-height:1.75;
      font-weight:900;
    }
    .muteline{
      color: rgba(255,255,255,.60);
      font-size:12px;
      font-weight:1000;
      letter-spacing:.02em;
    }
  </style>
</head>

<body>
<header class="header">
  <div class="head-inner">
    <button class="back" id="backBtn" type="button" aria-label="æˆ»ã‚‹">â†</button>
    <div class="titlebox">
      <div class="title">ã‚³ãƒ©ãƒœã‚«ãƒ¼ãƒ‰å›³é‘‘</div>
      <div class="subline">
        <span class="badge gold" id="updatedBadge">æ›´æ–°: --</span>
        <span class="badge" id="summaryBadge">â€”</span>
      </div>
    </div>
  </div>
</header>

<main class="wrap">

  <!-- âœ… ã‚´ãƒãƒ£ã¤ãå‰Šæ¸›ï¼šä¸Šéƒ¨ã¯ã“ã‚Œã ã‘ -->
  <section class="topbox" aria-label="åˆ‡æ›¿ã¨æ¤œç´¢">
    <div class="tophead">
      <h1 class="h1">ç¾ç‰©ï¼ˆç´™ï¼‰ / ãƒ‡ã‚¸ã‚¿ãƒ«ï¼ˆã‚²ãƒ¼ãƒ å†…ï¼‰ã‚’æ··ãœãšã«è¡¨ç¤º</h1>
      <div class="small">ã‚¿ãƒƒãƒ—ã§æ‹¡å¤§ã§ãã¾ã™</div>
    </div>

    <div class="tabs" role="tablist" aria-label="è¡¨ç¤ºåˆ‡æ›¿">
      <button class="tab" id="tabPaper" role="tab" aria-selected="true" type="button">ç¾ç‰©ï¼ˆç´™ï¼‰</button>
      <button class="tab" id="tabDigital" role="tab" aria-selected="false" type="button">ãƒ‡ã‚¸ã‚¿ãƒ«ï¼ˆã‚²ãƒ¼ãƒ å†…ï¼‰</button>
    </div>

    <div class="subtabs" id="paperSubTabs" aria-label="ç¾ç‰©ã®åŒºåˆ†">
      <button class="subtab" data-paper="sale" aria-pressed="true" type="button">è²©å£²ï¼ˆãƒ‘ãƒƒã‚¯åéŒ²ï¼‰</button>
      <button class="subtab" data-paper="legend" aria-pressed="false" type="button">éå£²å“ï¼ˆé…å¸ƒçµ‚äº†ï¼‰</button>
    </div>

    <div class="searchrow">
      <label class="search" aria-label="æ¤œç´¢">
        <span class="ico">ğŸ”</span>
        <input id="q" type="search" placeholder="ã‚«ãƒ¼ãƒ‰å / ç•ªå·ï¼ˆTN-048ï¼‰ / ä½ä¿£ / ğŸ¯" autocomplete="off" />
      </label>

      <select id="sort" class="sort" aria-label="ä¸¦ã³æ›¿ãˆ">
        <option value="no_asc">ç•ªå·é †</option>
        <option value="no_desc">ç•ªå·é€†</option>
        <option value="name">åå‰é †</option>
      </select>

      <div class="count" id="countLine">0 / 0</div>
    </div>

    <!-- âœ… ãƒ‡ã‚¸ã‚¿ãƒ«èª¬æ˜ï¼šçŸ­ããƒ»èª¤è§£ã‚¼ãƒ­ -->
    <div class="note" id="digitalNote" hidden>
      <b>ãƒ‡ã‚¸ã‚¿ãƒ«ï¼ˆã‚²ãƒ¼ãƒ å†…ï¼‰ã‚³ãƒ©ãƒœ</b>ã¯ã€ç¾ç‰©ã®ç´™ã‚«ãƒ¼ãƒ‰ã¨ã¯åˆ¥æ ã§ã™ã€‚<br>
      ã‚·ãƒªã‚¢ãƒ«ã§å¢—ãˆã‚‹ã®ã¯<b>ã‚«ãƒ¼ãƒ‰</b>ã§ã¯ãªã<b>ã‚³ãƒ©ãƒœã®ã‚¿ãƒ</b>ã€‚<br>
      ã€ŒãŸã“ã´ã®ãŠåº—ã€ã§å…¥åŠ› â†’ ã‚¿ãƒå…¥æ‰‹ â†’ ç•‘ã§è‚²ã¦ã¦<b>åç©«</b>ã—ãŸç¬é–“ã«ã€ã‚²ãƒ¼ãƒ å†…ã‚«ãƒ¼ãƒ‰ã¨ã—ã¦å›³é‘‘ã«è¿½åŠ ã•ã‚Œã¾ã™ã€‚<br>
      <span class="mini">â€»ãƒ¬ã‚¢ãƒªãƒ†ã‚£ã¯åç©«æ™‚ã«ãƒ©ãƒ³ãƒ€ãƒ ã§æ±ºå®š</span>
    </div>
  </section>

  <div class="sectionline" id="sectionLine">
    <h2 id="sectionTitle">â€”</h2>
    <div class="right" id="sectionHint">â€”</div>
  </div>

  <section class="grid" id="grid" aria-label="ã‚«ãƒ¼ãƒ‰ä¸€è¦§"></section>

  <div id="emptyBox" class="empty" hidden>
    ã“ã“ã¯ä»Šå¾Œå¢—ãˆã‚‹ <b>ãƒ‡ã‚¸ã‚¿ãƒ«ï¼ˆã‚²ãƒ¼ãƒ å†…ï¼‰ã‚³ãƒ©ãƒœ</b> ã®æ ã§ã™ã€‚<br>
    ã¾ãšã¯ <b>ç¾ç‰©ï¼ˆç´™ï¼‰</b> ã‚¿ãƒ–ã‹ã‚‰ã€è²©å£²ç”¨ãƒ»éå£²å“ã®ã‚³ãƒ©ãƒœã‚’è¦‹ã¦ãã ã•ã„ã€‚
  </div>

  <div class="footer">
    <div class="links">
      <a class="btnlink" href="./index.html">ãƒˆãƒƒãƒ—ã¸</a>
      <a class="btnlink" href="./zukan.html">å›³é‘‘ã¸</a>
      <a class="btnlink gold" href="https://takoyaki-toreka.booth.pm/" target="_blank" rel="noopener">BOOTH</a>
    </div>
    <div>Â© ç„¼ã‹ã‚ŒãŸä¼èª¬</div>
  </div>

</main>

<!-- Modal -->
<div class="modal" id="modal" aria-hidden="true" role="dialog" aria-modal="true">
  <div class="modal-card" role="document">
    <div class="modal-top">
      <div class="mn" id="mTitle">â€”</div>
      <button class="close" id="mClose" type="button" aria-label="é–‰ã˜ã‚‹">é–‰ã˜ã‚‹</button>
    </div>

    <div class="modal-body">
      <div class="modal-art">
        <div class="modal-cardbox">
          <img id="mImg" src="" alt="æ‹¡å¤§ç”»åƒ" />
        </div>
      </div>

      <div class="modal-info">
        <div class="modal-tags" id="mTags"></div>
        <p class="modal-desc" id="mDesc">â€”</p>
        <div class="muteline" id="mMeta">â€”</div>
      </div>
    </div>
  </div>
</div>

<script>
(() => {
  "use strict";

  /* =========================
     æ›´æ–°æ—¥
  ========================= */
  const UPDATED = "2026-02-14";

  /* =========================
     ãƒ‡ãƒ¼ã‚¿ï¼ˆç¾ç‰©ï¼šè²©å£² / éå£²å“ï¼‰
     â€» ç”»åƒãƒ‘ã‚¹ã¯ assets/images/ ã«å¯„ã›ãŸç‰ˆ
     â€» ã„ã¾çµ¶å¯¾ãƒ‘ã‚¹é‹ç”¨ãªã‚‰ã€imgã‚’ https://... ã«æˆ»ã—ã¦OK
  ========================= */

  // âœ… ç¾ç‰©ï¼ˆè²©å£²ï¼šãƒ‘ãƒƒã‚¯åéŒ²ï¼‰ãƒ€ãƒ¼ãƒ„ãƒ—ãƒ­ã‚³ãƒ©ãƒœ 5æš
  const SALE_CARDS = [
    { no:"TN-022", name:"ãŸã“ç„¼ããƒ€ãƒ¼ãƒ„ã‚¤ãƒ³ãƒ•ã‚§ãƒ«ãƒã€Šå°é¦¬è£•ä½³å­ãƒ—ãƒ­ã€‹", img:"assets/images/collabo/darts/TN-022.jpg", kind:"è²©å£²ç”¨", tags:["ğŸ¯","ãƒ€ãƒ¼ãƒ„ãƒ—ãƒ­","ç¾ç‰©","è²©å£²"] },
    { no:"TN-028", name:"è‡ªå·±å•“ç™ºãŸã“å¡¾ã€Šäº•ä¸Šè«’ãƒ—ãƒ­ã€‹",               img:"assets/images/collabo/darts/TN-028.jpg", kind:"è²©å£²ç”¨", tags:["ğŸ¯","ãƒ€ãƒ¼ãƒ„ãƒ—ãƒ­","ç¾ç‰©","è²©å£²"] },
    { no:"TN-029", name:"ã‚«ãƒ­ãƒªãƒ¼ã‚¼ãƒ­ç†è«–ã€Šä»æœ¨æ²»ãƒ—ãƒ­ã€‹",               img:"assets/images/collabo/darts/TN-029.jpg", kind:"è²©å£²ç”¨", tags:["ğŸ¯","ãƒ€ãƒ¼ãƒ„ãƒ—ãƒ­","ç¾ç‰©","è²©å£²"] },
    { no:"TN-044", name:"ç™½ã„å¥‘ç´„ã€Šç¨²çŸ³è£•ãƒ—ãƒ­ã€‹",                         img:"assets/images/collabo/darts/TN-044.jpg", kind:"è²©å£²ç”¨", tags:["ğŸ¯","ãƒ€ãƒ¼ãƒ„ãƒ—ãƒ­","ç¾ç‰©","è²©å£²"] },
    { no:"TN-048", name:"åº—ä¸»åæ’ƒãƒ¬ãƒ“ãƒ¥ãƒ¼ã€Šä½ä¿£é›„ä¸€éƒã€‹",                 img:"assets/images/collabo/darts/TN-048.jpg", kind:"è²©å£²ç”¨", tags:["ğŸ¯","ãƒ€ãƒ¼ãƒ„ãƒ—ãƒ­","ç¾ç‰©","è²©å£²"] },
  ];

  // âœ… ç¾ç‰©ï¼ˆéå£²å“ï¼šé…å¸ƒçµ‚äº†ï¼‰5æš
  const LEGEND_CARDS = [
    { no:"BS-001", name:"å°é¦¬è£•ä½³å­ï¼ˆéå£²å“ï¼‰", img:"assets/images/legend/bussasari/BS-001.png", kind:"éå£²å“", tags:["éå£²å“","é…å¸ƒçµ‚äº†","5ãƒ‘ãƒƒã‚¯ç‰¹å…¸","ç¾ç‰©"] },
    { no:"BS-002", name:"ä½ä¿£é›„ä¸€éƒï¼ˆéå£²å“ï¼‰", img:"assets/images/legend/bussasari/BS-002.png", kind:"éå£²å“", tags:["éå£²å“","é…å¸ƒçµ‚äº†","5ãƒ‘ãƒƒã‚¯ç‰¹å…¸","ç¾ç‰©"] },
    { no:"BS-003", name:"äº•ä¸Šè«’ï¼ˆéå£²å“ï¼‰",     img:"assets/images/legend/bussasari/BS-003.png", kind:"éå£²å“", tags:["éå£²å“","é…å¸ƒçµ‚äº†","5ãƒ‘ãƒƒã‚¯ç‰¹å…¸","ç¾ç‰©"] },
    { no:"BS-004", name:"ä»æœ¨æ²»ï¼ˆéå£²å“ï¼‰",     img:"assets/images/legend/bussasari/BS-004.png", kind:"éå£²å“", tags:["éå£²å“","é…å¸ƒçµ‚äº†","5ãƒ‘ãƒƒã‚¯ç‰¹å…¸","ç¾ç‰©"] },
    { no:"BS-005", name:"ç¨²çŸ³è£•ï¼ˆéå£²å“ï¼‰",     img:"assets/images/legend/bussasari/BS-005.png", kind:"éå£²å“", tags:["éå£²å“","é…å¸ƒçµ‚äº†","5ãƒ‘ãƒƒã‚¯ç‰¹å…¸","ç¾ç‰©"] },
  ];

  // âœ… ãƒ‡ã‚¸ã‚¿ãƒ«ï¼ˆã‚²ãƒ¼ãƒ å†…ï¼‰æ ï¼šä»Šå¾Œè¿½åŠ ç”¨ï¼ˆç©ºã§ã‚‚OKï¼‰
  const DIGITAL_CARDS = [
    // ä¾‹ï¼š
    // { no:"D-001", name:"ãƒ‡ã‚¸ã‚¿ãƒ«ã‚³ãƒ©ãƒœä¾‹", img:"assets/images/digital/sample.png", kind:"ãƒ‡ã‚¸ã‚¿ãƒ«", tags:["ãƒ‡ã‚¸ã‚¿ãƒ«","ã‚²ãƒ¼ãƒ å†…"] },
  ];

  /* =========================
     DOM
  ========================= */
  const $ = (q) => document.querySelector(q);

  const updatedBadge = $("#updatedBadge");
  const summaryBadge = $("#summaryBadge");

  const tabPaper = $("#tabPaper");
  const tabDigital = $("#tabDigital");
  const paperSubTabs = $("#paperSubTabs");
  const digitalNote = $("#digitalNote");

  const q = $("#q");
  const sortSel = $("#sort");
  const countLine = $("#countLine");

  const sectionTitle = $("#sectionTitle");
  const sectionHint = $("#sectionHint");

  const grid = $("#grid");
  const emptyBox = $("#emptyBox");

  const modal = $("#modal");
  const mTitle = $("#mTitle");
  const mImg = $("#mImg");
  const mTags = $("#mTags");
  const mDesc = $("#mDesc");
  const mMeta = $("#mMeta");
  const mClose = $("#mClose");

  $("#backBtn").addEventListener("click", () => history.back());
  updatedBadge.textContent = `æ›´æ–°: ${UPDATED}`;

  /* =========================
     State
  ========================= */
  const state = {
    mode: "paper",     // "paper" | "digital"
    paper: "sale",     // "sale" | "legend"
    query: "",
    sort: "no_asc",
  };

  function normalizeNo(no){
    const s = String(no||"").trim();
    const m = s.match(/^([A-Z]+)-(\d+)$/);
    if(!m) return { p:s, n:0 };
    return { p:m[1], n: parseInt(m[2],10) };
  }

  function sortCards(list){
    const a = [...list];
    if(state.sort === "no_asc"){
      a.sort((x,y) => {
        const ax = normalizeNo(x.no), ay = normalizeNo(y.no);
        if(ax.p !== ay.p) return ax.p.localeCompare(ay.p);
        return ax.n - ay.n;
      });
    }else if(state.sort === "no_desc"){
      a.sort((x,y) => {
        const ax = normalizeNo(x.no), ay = normalizeNo(y.no);
        if(ax.p !== ay.p) return ay.p.localeCompare(ax.p);
        return ay.n - ax.n;
      });
    }else{
      a.sort((x,y) => (x.name||"").localeCompare(y.name||"", "ja"));
    }
    return a;
  }

  function matches(card){
    if(!state.query) return true;
    const s = state.query.toLowerCase();
    const hay = [card.no, card.name, card.kind, ...(card.tags||[])].join(" ").toLowerCase();
    return hay.includes(s);
  }

  function makeTag(text, cls=""){
    const el = document.createElement("span");
    el.className = "tag" + (cls ? " " + cls : "");
    el.textContent = text;
    return el;
  }

  function openModal(card){
    mTitle.textContent = `${card.no}ï½œ${card.name}`;
    mImg.src = card.img;
    mImg.alt = card.name;

    mTags.innerHTML = "";
    if(card.kind === "éå£²å“"){
      mTags.appendChild(makeTag("éå£²å“", "gold"));
      mTags.appendChild(makeTag("é…å¸ƒçµ‚äº†", "gold"));
    }else if(card.kind === "è²©å£²ç”¨"){
      mTags.appendChild(makeTag("è²©å£²ï¼ˆç¾ç‰©ï¼‰", "dim"));
      if((card.tags||[]).includes("ğŸ¯")) mTags.appendChild(makeTag("ğŸ¯", "gold"));
    }else{
      mTags.appendChild(makeTag("ãƒ‡ã‚¸ã‚¿ãƒ«ï¼ˆã‚²ãƒ¼ãƒ å†…ï¼‰", "gold"));
    }

    // èª¬æ˜æ–‡ï¼ˆçŸ­ããƒ»åˆ†ã‹ã‚Šã‚„ã™ãï¼‰
    if(card.kind === "éå£²å“"){
      mDesc.innerHTML =
        `æœŸé–“ä¸­ã€Œ<b>5ãƒ‘ãƒƒã‚¯è³¼å…¥ã”ã¨ã«1æš</b>ã€è´ˆå‘ˆã•ã‚ŒãŸ<b>éå£²å“ã‚«ãƒ¼ãƒ‰</b>ã§ã™ã€‚<br>` +
        `ç¾åœ¨ã¯<b>é…å¸ƒçµ‚äº†</b>ã—ã¦ãŠã‚Šã€å…¥æ‰‹ã§ãã¾ã›ã‚“ã€‚`;
      mMeta.textContent = "åŒºåˆ†ï¼šç¾ç‰©ï¼ˆéå£²å“ / é…å¸ƒçµ‚äº†ï¼‰";
    }else if(card.kind === "è²©å£²ç”¨"){
      mDesc.innerHTML =
        `ã“ã®ã‚«ãƒ¼ãƒ‰ã¯<b>ç¾ç‰©ã®ç´™ã‚«ãƒ¼ãƒ‰ï¼ˆãƒ‘ãƒƒã‚¯åéŒ²ï¼‰</b>ã«å«ã¾ã‚Œã‚‹ã‚³ãƒ©ãƒœã§ã™ã€‚<br>` +
        `ï¼ˆâ€»ã‚²ãƒ¼ãƒ å†…ã®ãƒ‡ã‚¸ã‚¿ãƒ«å…¥æ‰‹ã¨ã¯åˆ¥æ ï¼‰`;
      mMeta.textContent = "åŒºåˆ†ï¼šç¾ç‰©ï¼ˆè²©å£² / ãƒ‘ãƒƒã‚¯åéŒ²ï¼‰";
    }else{
      mDesc.innerHTML =
        `ã“ã®ã‚«ãƒ¼ãƒ‰ã¯<b>ãƒ‡ã‚¸ã‚¿ãƒ«ï¼ˆã‚²ãƒ¼ãƒ å†…ï¼‰</b>ã®ã‚³ãƒ©ãƒœæ ã§ã™ã€‚<br>` +
        `ã‚·ãƒªã‚¢ãƒ«ã§å¢—ãˆã‚‹ã®ã¯<b>ã‚«ãƒ¼ãƒ‰</b>ã§ã¯ãªã<b>ã‚³ãƒ©ãƒœã®ã‚¿ãƒ</b>ã€‚ç•‘ã§è‚²ã¦ã¦<b>åç©«</b>ã—ãŸç¬é–“ã«å›³é‘‘ã¸è¨˜éŒ²ã•ã‚Œã¾ã™ã€‚`;
      mMeta.textContent = "åŒºåˆ†ï¼šãƒ‡ã‚¸ã‚¿ãƒ«ï¼ˆã‚²ãƒ¼ãƒ å†…ï¼‰";
    }

    modal.setAttribute("aria-hidden","false");
    document.body.style.overflow = "hidden";
  }

  function closeModal(){
    modal.setAttribute("aria-hidden","true");
    document.body.style.overflow = "";
  }

  mClose.addEventListener("click", closeModal);
  modal.addEventListener("click", (e) => { if(e.target === modal) closeModal(); });
  document.addEventListener("keydown", (e) => {
    if(e.key === "Escape" && modal.getAttribute("aria-hidden")==="false") closeModal();
  });

  function makeTile(card){
    const tile = document.createElement("article");
    tile.className = "tile";
    tile.setAttribute("tabindex","0");
    tile.setAttribute("role","button");
    tile.setAttribute("aria-label", `${card.no} ${card.name} ã‚’é–‹ã`);

    const art = document.createElement("div");
    art.className = "art";

    const img = document.createElement("img");
    img.src = card.img;
    img.alt = card.name;

    const frame = document.createElement("div");
    frame.className = "frame";

    art.appendChild(img);
    art.appendChild(frame);

    const info = document.createElement("div");
    info.className = "info";

    const no = document.createElement("div");
    no.className = "no";
    no.textContent = card.no;

    const name = document.createElement("div");
    name.className = "name";
    name.textContent = card.name;

    const tags = document.createElement("div");
    tags.className = "tags";

    if(card.kind === "éå£²å“"){
      tags.appendChild(makeTag("éå£²å“", "gold"));
      tags.appendChild(makeTag("é…å¸ƒçµ‚äº†", "gold"));
    }else if(card.kind === "è²©å£²ç”¨"){
      tags.appendChild(makeTag("è²©å£²", "dim"));
      if((card.tags||[]).includes("ğŸ¯")) tags.appendChild(makeTag("ğŸ¯", "gold"));
    }else{
      tags.appendChild(makeTag("ãƒ‡ã‚¸ã‚¿ãƒ«", "gold"));
    }

    info.appendChild(no);
    info.appendChild(name);
    info.appendChild(tags);

    tile.appendChild(art);
    tile.appendChild(info);

    tile.addEventListener("click", () => openModal(card));
    tile.addEventListener("keydown", (e) => {
      if(e.key === "Enter" || e.key === " "){ e.preventDefault(); openModal(card); }
    });

    return tile;
  }

  function setMode(mode){
    state.mode = mode;

    tabPaper.setAttribute("aria-selected", String(mode==="paper"));
    tabDigital.setAttribute("aria-selected", String(mode==="digital"));

    paperSubTabs.style.display = (mode==="paper") ? "" : "none";
    digitalNote.hidden = (mode!=="digital");

    // ãƒ‡ã‚¸ã‚¿ãƒ«ã¯æ¤œç´¢æ¬„ã¯ä½¿ãˆã‚‹ã‚ˆã†ã«æ®‹ã™ï¼ˆãŸã ã—ä»Šã¯ç©ºã®å¯èƒ½æ€§ã‚ã‚Šï¼‰
    render();
  }

  function setPaper(which){
    state.paper = which;
    paperSubTabs.querySelectorAll(".subtab").forEach(b => b.setAttribute("aria-pressed","false"));
    const btn = paperSubTabs.querySelector(`.subtab[data-paper="${which}"]`);
    if(btn) btn.setAttribute("aria-pressed","true");
    render();
  }

  // ã‚¤ãƒ™ãƒ³ãƒˆ
  tabPaper.addEventListener("click", () => setMode("paper"));
  tabDigital.addEventListener("click", () => setMode("digital"));

  paperSubTabs.addEventListener("click", (e) => {
    const btn = e.target.closest(".subtab");
    if(!btn) return;
    setPaper(btn.dataset.paper);
  });

  q.addEventListener("input", () => { state.query = (q.value||"").trim(); render(); });
  sortSel.addEventListener("change", () => { state.sort = sortSel.value; render(); });

  function render(){
    // ã‚µãƒãƒªãƒ¼ï¼ˆãƒ˜ãƒƒãƒ€ã«æœ€å°é™ï¼‰
    summaryBadge.textContent = `è²©å£² ${SALE_CARDS.length} / éå£²å“ ${LEGEND_CARDS.length} / åˆè¨ˆ ${SALE_CARDS.length + LEGEND_CARDS.length}`;

    grid.innerHTML = "";
    emptyBox.hidden = true;

    // ===== ãƒ‡ã‚¸ã‚¿ãƒ« =====
    if(state.mode === "digital"){
      const list = sortCards(DIGITAL_CARDS.filter(matches));
      sectionTitle.textContent = "ãƒ‡ã‚¸ã‚¿ãƒ«ï¼ˆã‚²ãƒ¼ãƒ å†…ï¼‰ï½œã‚³ãƒ©ãƒœæ ";
      sectionHint.textContent = "ã‚·ãƒªã‚¢ãƒ« â†’ ã‚¿ãƒ â†’ è‚²æˆ â†’ åç©«ã§å›³é‘‘ã«è¿½åŠ ";
      countLine.textContent = `${list.length} / ${DIGITAL_CARDS.length}`;

      if(list.length === 0){
        emptyBox.hidden = false;
        return;
      }
      list.forEach(c => grid.appendChild(makeTile(c)));
      return;
    }

    // ===== ç¾ç‰©ï¼ˆç´™ï¼‰ =====
    if(state.paper === "sale"){
      const base = SALE_CARDS;
      const list = sortCards(base.filter(matches));
      sectionTitle.textContent = "ç¾ç‰©ï¼ˆç´™ï¼‰ï½œè²©å£²ï¼ˆãƒ‘ãƒƒã‚¯åéŒ²ï¼‰";
      sectionHint.textContent = "ãƒ€ãƒ¼ãƒ„ãƒ—ãƒ­ğŸ¯ã‚³ãƒ©ãƒœï¼ˆç¾ç‰©ï¼‰";
      countLine.textContent = `${list.length} / ${base.length}`;
      if(list.length === 0){
        emptyBox.hidden = false;
        emptyBox.innerHTML = `è©²å½“ã™ã‚‹ã‚«ãƒ¼ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚<br><b>æ¤œç´¢ãƒ¯ãƒ¼ãƒ‰</b>ã‚’çŸ­ãã—ã¦ã¿ã¦ãã ã•ã„ã€‚`;
        emptyBox.hidden = false;
        return;
      }
      list.forEach(c => grid.appendChild(makeTile(c)));
      return;
    }

    // ===== ç¾ç‰©ï¼ˆéå£²å“ï¼‰ =====
    {
      const base = LEGEND_CARDS;
      const list = sortCards(base.filter(matches));
      sectionTitle.textContent = "ç¾ç‰©ï¼ˆç´™ï¼‰ï½œéå£²å“ï¼ˆé…å¸ƒçµ‚äº†ï¼‰";
      sectionHint.textContent = "â€»æœŸé–“ä¸­ã€Œ5ãƒ‘ãƒƒã‚¯è³¼å…¥ã”ã¨ã«1æšã€è´ˆå‘ˆï¼ç¾åœ¨ã¯é…å¸ƒçµ‚äº†";
      countLine.textContent = `${list.length} / ${base.length}`;
      if(list.length === 0){
        emptyBox.innerHTML = `è©²å½“ã™ã‚‹ã‚«ãƒ¼ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚<br><b>æ¤œç´¢ãƒ¯ãƒ¼ãƒ‰</b>ã‚’çŸ­ãã—ã¦ã¿ã¦ãã ã•ã„ã€‚`;
        emptyBox.hidden = false;
        return;
      }
      list.forEach(c => grid.appendChild(makeTile(c)));
    }
  }

  // åˆæœŸåŒ–
  setMode("paper");
  setPaper("sale");
  render();
})();
</script>
</body>
</html>
